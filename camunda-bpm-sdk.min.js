!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.CamSDK=e()}}(function(){var define,module,exports;return function e(f,n,o){function d(t,l){if(!n[t]){if(!f[t]){var u="function"==typeof require&&require;if(!l&&u)return u(t,!0);if(i)return i(t,!0);throw new Error("Cannot find module '"+t+"'")}var p=n[t]={exports:{}};f[t][0].call(p.exports,function(e){var n=f[t][1][e];return d(n?n:e)},p,p.exports,e,f,n,o)}return n[t].exports}for(var i="function"==typeof require&&require,t=0;t<o.length;t++)d(o[t]);return d}({1:[function(e,f,n){"use strict";function o(){}var d=e("q"),i=e("./../events"),t=e("./../base-class"),l=t.extend({initialize:function(){this.http=this.constructor.http}},{path:"",http:{},create:function(){},list:function(e,f){"function"==typeof e&&(f=e,e={}),e=e||{},f=f||o;var n=this,i={count:0,items:[]},t=d.defer(),l=!1,u=!1,p=function(){u&&l&&(n.trigger("loaded",i),t.resolve(i),f(null,i))};return n.count(e,function(e,o){e?(n.trigger("error",e),t.reject(e),f(e)):(i.count=o,l=!0,p())}),n.http.get(n.path,{data:e,done:function(o,d){o?(n.trigger("error",o),t.reject(o),f(o)):(i.items=d,i.firstResult=parseInt(e.firstResult||0,10),i.maxResults=i.firstResult+parseInt(e.maxResults||10,10),u=!0,p())}}),t.promise},count:function(e,f){"function"==typeof e&&(f=e,e={}),e=e||{},f=f||o;var n=this,i=d.defer();return this.http.get(this.path+"/count",{data:e,done:function(e,o){e?(n.trigger("error",e),i.reject(e),f(e)):(i.resolve(o.count),f(null,o.count))}}),i.promise},update:function(){},"delete":function(){}});i.attach(l),f.exports=l},{"./../base-class":29,"./../events":30,q:49}],2:[function(e,f,n){(function(n){"use strict";function o(){}function d(e,f,n){return f=f||o,function(o,d){return o||!d.ok&&!d.noContent?(o=o||d.error||new Error("The "+d.req.method+" request on "+d.req.url+" failed"),d&&d.body&&d.body.message&&(o.message=d.body.message),e.trigger("error",o),n&&n.reject(o),f(o)):("application/hal+json"===d.type&&(d.body&&0!==Object.keys(d.body).length||(d.body=JSON.parse(d.text)),d.body=u.solveHALEmbedded(d.body)),n&&n.resolve(d.body?d.body:d.text?d.text:""),void f(null,d.body?d.body:d.text?d.text:""))}}var i=e("superagent"),t=e("q"),l=e("./../events"),u=e("./../utils"),p=function(e){if(e=e||{},e.headers=e.headers||{},e.headers.Accept||(e.headers.Accept="application/hal+json, application/json; q=0.5"),!e.baseUrl)throw new Error("HttpClient needs a `baseUrl` configuration property.");l.attach(this),this.config=e};p.prototype.post=function(e,f){f=f||{};var l=f.done||o,u=this,p=t.defer(),s=this.config.baseUrl+(e?"/"+e:""),y=i.post(s);if("undefined"!=typeof n)Object.keys(f.fields||{}).forEach(function(e){y.field(e,f.fields[e])}),(f.attachments||[]).forEach(function(e,f){y.attach("data_"+f,new n(e.content),e.name)});else if(f.fields||f.attachments){var a=new Error("Multipart request is only supported in node.js environement.");return l(a),p.reject(a)}return y.set(this.config.headers).send(f.data||{}).query(f.query||{}),y.end(d(u,l,p)),p.promise},p.prototype.get=function(e,f){var n=this.config.baseUrl+(e?"/"+e:"");return this.load(n,f)},p.prototype.load=function(e,f){f=f||{};var n=f.done||o,l=this,u=t.defer(),p=f.accept||this.config.headers.Accept,s=i.get(e).set(f.headers||this.config.headers).set("Accept",p).query(f.data||{});return s.end(d(l,n,u)),u.promise},p.prototype.put=function(e,f){f=f||{};var n=f.done||o,l=this,u=t.defer(),p=this.config.baseUrl+(e?"/"+e:""),s=i.put(p).set(f.headers||this.config.headers).send(f.data||{});return s.end(d(l,n,u)),u.promise},p.prototype.del=function(e,f){f=f||{};var n=f.done||o,l=this,u=t.defer(),p=this.config.baseUrl+(e?"/"+e:""),s=i.del(p).set(f.headers||this.config.headers).send(f.data||{});return s.end(d(l,n,u)),u.promise},p.prototype.options=function(e,f){f=f||{};var n=f.done||o,l=this,u=t.defer(),p=this.config.baseUrl+(e?"/"+e:""),s=i("OPTIONS",p).set(f.headers||this.config.headers);return s.end(d(l,n,u)),u.promise},f.exports=p}).call(this,e("buffer").Buffer)},{"./../events":30,"./../utils":42,buffer:44,q:49,superagent:51}],3:[function(e,f,n){"use strict";function o(e){if(!e)throw new Error("Needs configuration");if(!e.apiUri)throw new Error("An apiUri is required");d.attach(this),e.engine="undefined"!=typeof e.engine?e.engine:"default",e.mock="undefined"!=typeof e.mock?e.mock:!0,e.resources=e.resources||{},this.HttpClient=e.HttpClient||o.HttpClient,this.baseUrl=e.apiUri,e.engine&&(this.baseUrl+="/"!==this.baseUrl.slice(-1)?"/":"",this.baseUrl+="engine/"+e.engine),this.config=e,this.initialize()}var d=e("./../events");o.HttpClient=e("./http-client"),function(f){f.config={};var n={};f.initialize=function(){function f(e){o.trigger("error",e)}n.authorization=e("./resources/authorization"),n.batch=e("./resources/batch"),n.deployment=e("./resources/deployment"),n["external-task"]=e("./resources/external-task"),n.filter=e("./resources/filter"),n.history=e("./resources/history"),n["process-definition"]=e("./resources/process-definition"),n["process-instance"]=e("./resources/process-instance"),n.task=e("./resources/task"),n["task-report"]=e("./resources/task-report"),n.variable=e("./resources/variable"),n["case-execution"]=e("./resources/case-execution"),n["case-instance"]=e("./resources/case-instance"),n["case-definition"]=e("./resources/case-definition"),n.user=e("./resources/user"),n.group=e("./resources/group"),n.tenant=e("./resources/tenant"),n.incident=e("./resources/incident"),n["job-definition"]=e("./resources/job-definition"),n.job=e("./resources/job"),n.metrics=e("./resources/metrics"),n["decision-definition"]=e("./resources/decision-definition"),n.execution=e("./resources/execution"),n.migration=e("./resources/migration"),n.drd=e("./resources/drd");var o=this;this.http=new this.HttpClient({baseUrl:this.baseUrl,headers:this.config.headers});var d,i,t,l;for(d in n){i={name:d,mock:this.config.mock,baseUrl:this.baseUrl,headers:this.config.headers},t=this.config.resources[d]||{};for(l in t)i[l]=t[l];n[d].http=new this.HttpClient(i),n[d].http.on("error",f)}},f.resource=function(e){return n[e]}}(o.prototype),f.exports=o},{"./../events":30,"./http-client":2,"./resources/authorization":4,"./resources/batch":5,"./resources/case-definition":6,"./resources/case-execution":7,"./resources/case-instance":8,"./resources/decision-definition":9,"./resources/deployment":10,"./resources/drd":11,"./resources/execution":12,"./resources/external-task":13,"./resources/filter":14,"./resources/group":15,"./resources/history":16,"./resources/incident":17,"./resources/job":19,"./resources/job-definition":18,"./resources/metrics":20,"./resources/migration":21,"./resources/process-definition":22,"./resources/process-instance":23,"./resources/task":25,"./resources/task-report":24,"./resources/tenant":26,"./resources/user":27,"./resources/variable":28}],4:[function(e,f,n){"use strict";var o=e("./../abstract-client-resource"),d=o.extend();d.path="authorization",d.list=function(e,f){return this.http.get(this.path,{data:e,done:f})},d.get=function(e,f){return this.http.get(this.path+"/"+e,{done:f})},d.create=function(e,f){return this.http.post(this.path+"/create",{data:e,done:f})},d.update=function(e,f){return this.http.put(this.path+"/"+e.id,{data:e,done:f})},d.save=function(e,f){return d[e.id?"update":"create"](e,f)},d["delete"]=function(e,f){return this.http.del(this.path+"/"+e,{done:f})},d.check=function(e,f){return this.http.get(this.path+"/check",{data:e,done:f})},f.exports=d},{"./../abstract-client-resource":1}],5:[function(e,f,n){"use strict";var o=e("./../abstract-client-resource"),d=o.extend();d.path="batch",d.get=function(e,f){return this.http.get(this.path+"/"+e,{done:f})},d.suspended=function(e,f){return this.http.put(this.path+"/"+e.id+"/suspended",{data:{suspended:!!e.suspended},done:f})},d.statistics=function(e,f){return this.http.get(this.path+"/statistics/",{data:e,done:f})},d.statisticsCount=function(e,f){return this.http.get(this.path+"/statistics/count",{data:e,done:f})},d["delete"]=function(e,f){var n=this.path+"/"+e.id;return e.cascade&&(n+="?cascade=true"),this.http.del(n,{done:f})},f.exports=d},{"./../abstract-client-resource":1}],6:[function(e,f,n){"use strict";function o(){}var d=e("./../abstract-client-resource"),i=d.extend();i.path="case-definition",i.get=function(e,f){return this.http.get(this.path+"/"+e,{done:f})},i.getByKey=function(e,f){return this.http.get(this.path+"/key/"+e,{done:f})},i.list=function(e,f){return this.http.get(this.path,{data:e,done:f})},i.create=function(e,f){var n=this.path+"/";return e.id?n+=e.id:(n=n+"key/"+e.key,e.tenantId&&(n=n+"/tenant-id/"+e.tenantId)),this.http.post(n+"/create",{data:e,done:f})},i.xml=function(e,f){var n=this.path+"/"+(e.id?e.id:"key/"+e.key)+"/xml";return this.http.get(n,{done:f||o})},f.exports=i},{"./../abstract-client-resource":1}],7:[function(e,f,n){"use strict";function o(){}var d=e("./../abstract-client-resource"),i=d.extend();i.path="case-execution",i.list=function(e,f){return f=f||o,this.http.get(this.path,{data:e,done:f})},i.disable=function(e,f,n){return this.http.post(this.path+"/"+e+"/disable",{data:f,done:n})},i.reenable=function(e,f,n){return this.http.post(this.path+"/"+e+"/reenable",{data:f,done:n})},i.manualStart=function(e,f,n){return this.http.post(this.path+"/"+e+"/manual-start",{data:f,done:n})},i.complete=function(e,f,n){return this.http.post(this.path+"/"+e+"/complete",{data:f,done:n})},i.deleteVariable=function(e,f){return this.http.del(this.path+"/"+e.id+"/localVariables/"+e.varId,{done:f})},i.modifyVariables=function(e,f){return this.http.post(this.path+"/"+e.id+"/localVariables",{data:e,done:f})},f.exports=i},{"./../abstract-client-resource":1}],8:[function(e,f,n){"use strict";var o=e("./../abstract-client-resource"),d=o.extend();d.path="case-instance",d.list=function(e,f){return this.http.get(this.path,{data:e,done:f})},d.close=function(e,f,n){return this.http.post(this.path+"/"+e+"/close",{data:f,done:n})},d.terminate=function(e,f,n){return this.http.post(this.path+"/"+e+"/terminate",{data:f,done:n})},f.exports=d},{"./../abstract-client-resource":1}],9:[function(e,f,n){"use strict";var o=e("./../abstract-client-resource"),d=o.extend();d.path="decision-definition",d.list=function(e,f){return this.http.get(this.path,{data:e,done:f})},d.get=function(e,f){return this.http.get(this.path+"/"+e,{done:f})},d.getXml=function(e,f){return this.http.get(this.path+"/"+e+"/xml",{done:f})},d.evaluate=function(e,f){return this.http.post(this.path+"/"+(e.id?e.id:"key/"+e.key)+"/evaluate",{data:e,done:f})},f.exports=d},{"./../abstract-client-resource":1}],10:[function(e,f,n){"use strict";var o=e("./../abstract-client-resource"),d=o.extend();d.path="deployment",d.create=function(e,f){var n={"deployment-name":e.deploymentName},o=Array.isArray(e.files)?e.files:[e.files];return e.deploymentSource&&(n["deployment-source"]=e.deploymentSource),e.enableDuplicateFiltering&&(n["enable-duplicate-filtering"]="true"),e.deployChangedOnly&&(n["deploy-changed-only"]="true"),e.tenantId&&(n["tenant-id"]=e.tenantId),this.http.post(this.path+"/create",{data:{},fields:n,attachments:o,done:f})},d["delete"]=function(e,f,n){var o=this.path+"/"+e;if(f){var d=[];for(var i in f){var t=f[i];d.push(i+"="+t)}d.length&&(o+="?"+d.join("&"))}return this.http.del(o,{done:n})},d.list=function(){return o.list.apply(this,arguments)},d.get=function(e,f){return this.http.get(this.path+"/"+e,{done:f})},d.getResources=function(e,f){return this.http.get(this.path+"/"+e+"/resources",{done:f})},d.getResource=function(e,f,n){return this.http.get(this.path+"/"+e+"/resources/"+f,{done:n})},d.getResourceData=function(e,f,n){return this.http.get(this.path+"/"+e+"/resources/"+f+"/data",{accept:"*/*",done:n})},d.redeploy=function(e,f){var n=e.id;return delete e.id,this.http.post(this.path+"/"+n+"/redeploy",{data:e,done:f||function(){}})},f.exports=d},{"./../abstract-client-resource":1}],11:[function(e,f,n){"use strict";function o(e,f){return e+"/"+t.escapeUrl(f)}function d(e,f,n){var o=e+"/key/"+t.escapeUrl(f);return"function"!=typeof n&&(o+="/tenant-id/"+t.escapeUrl(n)),o}var i=e("../abstract-client-resource"),t=e("../../utils"),l=i.extend();l.path="decision-requirements-definition",l.count=function(e,f){return"function"==typeof e&&(f=e,e={}),this.http.get(this.path+"/count",{data:e,done:f})},l.list=function(e,f){return"function"==typeof e&&(f=e,e={}),this.http.get(this.path,{data:e,done:f})},l.get=function(e,f){return this.http.get(o(this.path,e),{done:f})},l.getByKey=function(e,f,n){var o=d(this.path,e,f);return"function"==typeof f&&(n=f),this.http.get(o,{done:n})},l.getXML=function(e,f){return this.http.get(o(this.path,e)+"/xml",{done:f})},l.getXMLByKey=function(e,f,n){var o=d(this.path,e,f)+"/xml";return"function"==typeof f&&(n=f),this.http.get(o,{done:n})},f.exports=l},{"../../utils":42,"../abstract-client-resource":1}],12:[function(e,f,n){"use strict";var o=e("./../abstract-client-resource"),d=o.extend();d.path="execution",d.deleteVariable=function(e,f){return this.http.del(this.path+"/"+e.id+"/localVariables/"+e.varId,{done:f})},d.modifyVariables=function(e,f){return this.http.post(this.path+"/"+e.id+"/localVariables",{data:e,done:f})},f.exports=d},{"./../abstract-client-resource":1}],13:[function(e,f,n){"use strict";var o=e("./../abstract-client-resource"),d=o.extend();d.path="external-task",d.get=function(e,f){return this.http.get(this.path+"/"+e.id,{data:e,done:f})},d.list=function(e,f){var n=this.path+"/";return n+="?firstResult="+(e.firstResult||0),n+="&maxResults="+(e.maxResults||15),this.http.post(n,{data:e,done:f})},d.count=function(e,f){return this.http.post(this.path+"/count",{data:e,done:f})},d.fetchAndLock=function(e,f){return this.http.post(this.path+"/fetchAndLock",{data:e,done:f})},d.complete=function(e,f){return this.http.post(this.path+"/"+e.id+"/complete",{data:e,done:f})},d.failure=function(e,f){return this.http.post(this.path+"/"+e.id+"/failure",{data:e,done:f})},d.unlock=function(e,f){return this.http.post(this.path+"/"+e.id+"/unlock",{data:e,done:f})},d.retries=function(e,f){return this.http.put(this.path+"/"+e.id+"/retries",{data:e,done:f})},f.exports=d},{"./../abstract-client-resource":1}],14:[function(e,f,n){"use strict";var o=e("./../abstract-client-resource"),d=o.extend();d.path="filter",d.get=function(e,f){return this.http.get(this.path+"/"+e,{done:f})},d.list=function(e,f){return this.http.get(this.path,{data:e,done:f})},d.getTasks=function(e,f){var n=this.path+"/";return"string"==typeof e?(n=n+e+"/list",e={}):(n=n+e.id+"/list",delete e.id),n+="?firstResult="+(e.firstResult||0),n+="&maxResults="+(e.maxResults||15),this.http.post(n,{data:e,done:f})},d.create=function(e,f){return this.http.post(this.path+"/create",{data:e,done:f})},d.update=function(e,f){return this.http.put(this.path+"/"+e.id,{data:e,done:f})},d.save=function(e,f){return d[e.id?"update":"create"](e,f)},d["delete"]=function(e,f){return this.http.del(this.path+"/"+e,{done:f})},d.authorizations=function(e,f){return 1===arguments.length?this.http.options(this.path,{done:e,headers:{Accept:"application/json"}}):this.http.options(this.path+"/"+e,{done:f,headers:{Accept:"application/json"}})},f.exports=d},{"./../abstract-client-resource":1}],15:[function(e,f,n){"use strict";function o(){}var d=e("./../abstract-client-resource"),i=e("../../utils"),t=d.extend();t.path="group",t.options=function(e,f){var n;return 1===arguments.length?(f=e,n=""):(n="string"==typeof e?e:e.id,void 0===n&&(n="")),this.http.options(this.path+"/"+i.escapeUrl(n),{done:f||o,headers:{Accept:"application/json"}})},t.create=function(e,f){return this.http.post(this.path+"/create",{data:e,done:f||o})},t.count=function(e,f){return 1===arguments.length?(f=e,e={}):e=e||{},this.http.get(this.path+"/count",{data:e,done:f||o})},t.get=function(e,f){var n="string"==typeof e?e:e.id;return this.http.get(this.path+"/"+i.escapeUrl(n),{data:e,done:f||o})},t.list=function(e,f){return 1===arguments.length?(f=e,e={}):e=e||{},this.http.get(this.path,{data:e,done:f||o})},t.createMember=function(e,f){return this.http.put(this.path+"/"+i.escapeUrl(e.id)+"/members/"+i.escapeUrl(e.userId),{data:e,done:f||o})},t.deleteMember=function(e,f){return this.http.del(this.path+"/"+i.escapeUrl(e.id)+"/members/"+i.escapeUrl(e.userId),{data:e,done:f||o})},t.update=function(e,f){return this.http.put(this.path+"/"+i.escapeUrl(e.id),{data:e,done:f||o})},t["delete"]=function(e,f){return this.http.del(this.path+"/"+i.escapeUrl(e.id),{data:e,done:f||o})},f.exports=t},{"../../utils":42,"./../abstract-client-resource":1}],16:[function(e,f,n){"use strict";var o=e("./../abstract-client-resource"),d=o.extend();d.path="history",d.userOperation=function(e,f){return"function"==typeof e&&(f=arguments[0],e={}),this.http.get(this.path+"/user-operation",{data:e,done:f})},d.processInstance=function(e,f){"function"==typeof e&&(f=arguments[0],e={});var n={},o={},d=["firstResult","maxResults"];for(var i in e)d.indexOf(i)>-1?o[i]=e[i]:n[i]=e[i];return this.http.post(this.path+"/process-instance",{data:n,query:o,done:f})},d.processInstanceCount=function(e,f){return"function"==typeof e&&(f=arguments[0],e={}),this.http.post(this.path+"/process-instance/count",{data:e,done:f})},d.deleteProcessInstancesAsync=function(e,f){return"function"==typeof e&&(f=arguments[0],e={}),this.http.post(this.path+"/process-instance/delete",{data:e,done:f})},d.decisionInstance=function(e,f){return"function"==typeof e&&(f=arguments[0],e={}),this.http.get(this.path+"/decision-instance",{data:e,done:f})},d.decisionInstanceCount=function(e,f){return"function"==typeof e&&(f=arguments[0],e={}),this.http.get(this.path+"/decision-instance/count",{data:e,done:f})},d.batch=function(e,f){return"function"==typeof e&&(f=arguments[0],e={}),this.http.get(this.path+"/batch",{data:e,done:f})},d.singleBatch=function(e,f){return this.http.get(this.path+"/batch/"+e,{done:f})},d.batchCount=function(e,f){return"function"==typeof e&&(f=arguments[0],e={}),this.http.get(this.path+"/batch/count",{data:e,done:f})},d.batchDelete=function(e,f){var n=this.path+"/batch/"+e;return this.http.del(n,{done:f})},d.report=function(e,f){return"function"==typeof e&&(f=arguments[0],e={}),e.reportType=e.reportType||"duration",e.periodUnit=e.periodUnit||"month",this.http.get(this.path+"/process-instance/report",{data:e,done:f})},d.reportAsCsv=function(e,f){return"function"==typeof e&&(f=arguments[0],e={}),e.reportType=e.reportType||"duration",e.periodUnit=e.periodUnit||"month",this.http.get(this.path+"/process-instance/report",{data:e,accept:"text/csv",done:f})},d.task=function(e,f){"function"==typeof e&&(f=arguments[0],e={});var n={},o={},d=["firstResult","maxResults"];for(var i in e)d.indexOf(i)>-1?o[i]=e[i]:n[i]=e[i];return this.http.post(this.path+"/task",{data:n,query:o,done:f})},d.taskCount=function(e,f){return"function"==typeof e&&(f=arguments[0],e={}),this.http.post(this.path+"/task/count",{data:e,done:f})},d.taskDurationReport=function(e,f){return"function"==typeof e&&(f=arguments[0],e={}),e.reportType=e.reportType||"duration",e.periodUnit=e.periodUnit||"month",this.http.get(this.path+"/task/report",{data:e,done:f})},d.taskReport=function(e,f){return"function"==typeof e&&(f=arguments[0],e={}),e.reportType=e.reportType||"count",this.http.get(this.path+"/task/report",{data:e,done:f})},d.caseInstance=function(e,f){"function"==typeof e&&(f=arguments[0],e={});var n={},o={},d=["firstResult","maxResults"];for(var i in e)d.indexOf(i)>-1?o[i]=e[i]:n[i]=e[i];return this.http.post(this.path+"/case-instance",{data:n,query:o,done:f})},d.caseInstanceCount=function(e,f){return"function"==typeof e&&(f=arguments[0],e={}),this.http.post(this.path+"/case-instance/count",{data:e,done:f})},d.caseActivityInstance=function(e,f){return"function"==typeof e&&(f=arguments[0],e={}),this.http.get(this.path+"/case-activity-instance",{data:e,done:f})},d.caseActivityInstanceCount=function(e,f){return"function"==typeof e&&(f=arguments[0],e={}),this.http.get(this.path+"/case-activity-instance/count",{data:e,done:f})},d.variableInstance=function(e,f){"function"==typeof e&&(f=arguments[0],e={});var n={},o={},d=["firstResult","maxResults","deserializeValues"];for(var i in e)d.indexOf(i)>-1?o[i]=e[i]:n[i]=e[i];return this.http.post(this.path+"/variable-instance",{data:n,query:o,done:f})},d.variableInstanceCount=function(e,f){return"function"==typeof e&&(f=arguments[0],e={}),this.http.post(this.path+"/variable-instance/count",{data:e,done:f})},d.caseActivityStatistics=function(e,f){var n=e.id||e;return this.http.get(this.path+"/case-definition/"+n+"/statistics",{done:f})},d.drdStatistics=function(e,f,n){var o=this.path+"/decision-requirements-definition/"+e+"/statistics";return"function"==typeof f&&(n=f,f={}),this.http.get(o,{data:f,done:n})},f.exports=d},{"./../abstract-client-resource":1}],17:[function(e,f,n){"use strict";var o=e("./../abstract-client-resource"),d=o.extend();d.path="incident",d.get=function(e,f){return this.http.get(this.path,{data:e,done:f})},d.count=function(e,f){return this.http.get(this.path+"/count",{data:e,done:f})},f.exports=d},{"./../abstract-client-resource":1}],18:[function(e,f,n){"use strict";var o=e("./../abstract-client-resource"),d=o.extend();d.path="job-definition",d.setRetries=function(e,f){return this.http.put(this.path+"/"+e.id+"/retries",{data:e,done:f})},f.exports=d},{"./../abstract-client-resource":1}],19:[function(e,f,n){"use strict";var o=e("./../abstract-client-resource"),d=o.extend();d.path="job",d.list=function(e,f){var n=this.path;return n+="?firstResult="+(e.firstResult||0),e.maxResults&&(n+="&maxResults="+e.maxResults),this.http.post(n,{data:e,done:f})},d.setRetries=function(e,f){return this.http.put(this.path+"/"+e.id+"/retries",{data:e,done:f})},d["delete"]=function(e,f){return this.http.del(this.path+"/"+e,{done:f})},f.exports=d},{"./../abstract-client-resource":1}],20:[function(e,f,n){"use strict";var o=e("./../abstract-client-resource"),d=o.extend();d.path="metrics",d.sum=function(e,f){var n=this.path+"/"+e.name+"/sum";return delete e.name,this.http.get(n,{data:e,done:f})},d.byInterval=function(e,f){return this.http.get(this.path,{data:e,done:f})},f.exports=d},{"./../abstract-client-resource":1}],21:[function(e,f,n){"use strict";var o=e("./../abstract-client-resource"),d=o.extend();d.path="migration",d.generate=function(e,f){var n=this.path+"/generate";return this.http.post(n,{data:e,done:f})},d.execute=function(e,f){var n=this.path+"/execute";return this.http.post(n,{data:e,done:f})},d.executeAsync=function(e,f){var n=this.path+"/executeAsync";return this.http.post(n,{data:e,done:f})},d.validate=function(e,f){var n=this.path+"/validate";return this.http.post(n,{data:e,done:f})},f.exports=d},{"./../abstract-client-resource":1}],22:[function(e,f,n){"use strict";function o(){}var d=e("q"),i=e("./../abstract-client-resource"),t=i.extend({suspend:function(e,f){return"function"==typeof e&&(f=e,e={}),e=e||{},f=f||o,this.http.post(this.path,{done:f})},stats:function(e){return this.http.post(this.path,{done:e||o})},start:function(e){return this.http.post(this.path,{data:{},done:e})}},{path:"process-definition",get:function(e,f){return this.http.get(this.path+"/"+e,{done:f})},getByKey:function(e,f){return this.http.get(this.path+"/key/"+e,{done:f})},list:function(){return i.list.apply(this,arguments)},formVariables:function(e,f){var n="";if(f=f||o,e.key)n="key/"+e.key;else{if(!e.id){var i=new Error("Process definition task variables needs either a key or an id.");return f(i),d.reject(i)}n=e.id}var t={deserializeValues:e.deserializeValues};return e.names&&(t.variableNames=(e.names||[]).join(",")),this.http.get(this.path+"/"+n+"/form-variables",{data:t,done:f})},submitForm:function(e,f){var n="";if(f=f||o,e.key)n="key/"+e.key,e.tenantId&&(n+="/tenant-id/"+e.tenantId);else{if(!e.id)return f(new Error("Process definition task variables needs either a key or an id."));n=e.id}return this.http.post(this.path+"/"+n+"/submit-form",{data:{businessKey:e.businessKey,variables:e.variables},done:f})},startForm:function(e,f){var n=this.path+"/"+(e.key?"key/"+e.key:e.id)+"/startForm";return this.http.get(n,{done:f||o})},xml:function(e,f){var n=this.path+"/"+(e.id?e.id:"key/"+e.key)+"/xml";return this.http.get(n,{done:f||o})},statistics:function(e,f){var n=this.path;return e.id?n+="/"+e.id:e.key&&(n+="/key/"+e.key),n+="/statistics",this.http.get(n,{data:e,done:f||o})},submit:function(e,f){var n=this.path;return n+=e.key?"/key/"+e.key:"/"+e.id,n+="/submit-form",this.http.post(n,{data:e,done:f})},suspend:function(e,f,n){return"function"==typeof f&&(n=f,f={}),f=f||{},n=n||o,e=Array.isArray(e)?e:[e],this.http.post(this.path,{done:n})},start:function(e,f){var n=this.path+"/";return e.id?n+=e.id:(n=n+"key/"+e.key,e.tenantId&&(n=n+"/tenant-id/"+e.tenantId)),this.http.post(n+"/start",{data:e,done:f})}});f.exports=t},{"./../abstract-client-resource":1,q:49}],23:[function(e,f,n){"use strict";var o=e("./../abstract-client-resource"),d=o.extend({},{path:"process-instance",get:function(e,f){return this.http.get(this.path+"/"+e,{done:f})},create:function(e,f){return this.http.post(e,f)},list:function(e,f){var n=this.path;return n+="?firstResult="+(e.firstResult||0),n+="&maxResults="+(e.maxResults||15),this.http.post(n,{data:e,done:f})},count:function(e,f){var n=this.path+"/count";return this.http.post(n,{data:e,done:f})},modify:function(e,f){return this.http.post(this.path+"/"+e.id+"/modification",{data:{instructions:e.instructions,skipCustomListeners:e.skipCustomListeners,skipIoMappings:e.skipIoMappings},done:f})},deleteAsync:function(e,f){return this.http.post(this.path+"/delete",{data:e,done:f})},deleteAsyncHistoricQueryBased:function(e,f){return this.http.post(this.path+"/delete-historic-query-based",{data:e,done:f})},setJobsRetriesAsync:function(e,f){return this.http.post(this.path+"/job-retries",{data:e,done:f})},setJobsRetriesAsyncHistoricQueryBased:function(e,f){return this.http.post(this.path+"/job-retries-historic-query-based",{data:e,done:f})}});f.exports=d},{"./../abstract-client-resource":1}],24:[function(e,f,n){"use strict";var o=e("./../abstract-client-resource"),d=o.extend();d.path="task/report",d.countByCandidateGroup=function(e){return this.http.get(this.path+"/candidate-group-count",{done:e})},d.countByCandidateGroupAsCsv=function(e){return this.http.get(this.path+"/candidate-group-count",{accept:"text/csv",done:e})},f.exports=d},{"./../abstract-client-resource":1}],25:[function(e,f,n){"use strict";function o(){}var d=e("q"),i=e("./../abstract-client-resource"),t=i.extend();t.path="task",t.list=function(e,f){f=f||o;var n=d.defer();return this.http.get(this.path,{data:e,done:function(e,o){if(e)return f(e),n.reject(e);if(o._embedded){var d=o._embedded.task||o._embedded.tasks,i=o._embedded.processDefinition;for(var t in d){var l=d[t];l._embedded=l._embedded||{};for(var u in i)if(i[u].id===l.processDefinitionId){l._embedded.processDefinition=[i[u]];break}}}f(null,o),n.resolve(o)}}),n.promise},t.get=function(e,f){return this.http.get(this.path+"/"+e,{done:f})},t.comments=function(e,f){return this.http.get(this.path+"/"+e+"/comment",{done:f})},t.identityLinks=function(e,f){return this.http.get(this.path+"/"+e+"/identity-links",{done:f})},t.identityLinksAdd=function(e,f,n){return 2===arguments.length&&(n=arguments[1],f=arguments[0],e=f.id),this.http.post(this.path+"/"+e+"/identity-links",{data:f,done:n})},t.identityLinksDelete=function(e,f,n){return 2===arguments.length&&(n=arguments[1],f=arguments[0],e=f.id),this.http.post(this.path+"/"+e+"/identity-links/delete",{data:f,done:n})},t.createComment=function(e,f,n){return this.http.post(this.path+"/"+e+"/comment/create",{data:{message:f},done:n})},t.create=function(e,f){return this.http.post(this.path+"/create",{data:e,done:f})},t.update=function(e,f){return this.http.put(this.path+"/"+e.id,{data:e,done:f})},t.assignee=function(e,f,n){var o={userId:f};return 2===arguments.length&&(e=arguments[0].taskId,o.userId=arguments[0].userId,n=arguments[1]),this.http.post(this.path+"/"+e+"/assignee",{data:o,done:n})},t.delegate=function(e,f,n){var o={userId:f};return 2===arguments.length&&(e=arguments[0].taskId,o.userId=arguments[0].userId,n=arguments[1]),this.http.post(this.path+"/"+e+"/delegate",{data:o,done:n})},t.claim=function(e,f,n){var o={userId:f};return 2===arguments.length&&(e=arguments[0].taskId,o.userId=arguments[0].userId,n=arguments[1]),this.http.post(this.path+"/"+e+"/claim",{data:o,done:n})},t.unclaim=function(e,f){return"string"!=typeof e&&(e=e.taskId),this.http.post(this.path+"/"+e+"/unclaim",{done:f})},t.submitForm=function(e,f){if(f=f||o,!e.id){var n=new Error("Task submitForm needs a task id.");return f(n),d.reject(n)}return this.http.post(this.path+"/"+e.id+"/submit-form",{data:{variables:e.variables},done:f})},t.complete=function(e,f){if(f=f||o,!e.id){var n=new Error("Task complete needs a task id.");return f(n),d.reject(n)}return this.http.post(this.path+"/"+e.id+"/complete",{data:{variables:e.variables},done:f})},t.formVariables=function(e,f){f=f||o;var n="";if(e.key)n="key/"+e.key;else{if(!e.id){var i=new Error("Task variables needs either a key or an id.");return f(i),d.reject(i)}n=e.id}var t={deserializeValues:e.deserializeValues};return e.names&&(t.variableNames=e.names.join(",")),this.http.get(this.path+"/"+n+"/form-variables",{data:t,done:f})},t.form=function(e,f){return this.http.get(this.path+"/"+e+"/form",{done:f})},t.localVariable=function(e,f){return this.http.put(this.path+"/"+e.id+"/localVariables/"+e.varId,{data:e,done:f})},t.localVariables=function(e,f){return this.http.get(this.path+"/"+e+"/localVariables",{done:f})},t.modifyVariables=function(e,f){return this.http.post(this.path+"/"+e.id+"/localVariables",{data:e,done:f})},t.deleteVariable=function(e,f){return this.http.del(this.path+"/"+e.id+"/localVariables/"+e.varId,{done:f})},f.exports=t},{"./../abstract-client-resource":1,q:49}],26:[function(e,f,n){"use strict";function o(){}var d=e("./../abstract-client-resource"),i=e("../../utils"),t=d.extend();t.path="tenant",t.create=function(e,f){return this.http.post(this.path+"/create",{data:e,done:f||o})},t.count=function(e,f){return 1===arguments.length?(f=e,e={}):e=e||{},this.http.get(this.path+"/count",{data:e,done:f||o})},t.get=function(e,f){var n;return"string"==typeof e?(n=e,e={}):(n=e.id,delete e.id),this.http.get(this.path+"/"+i.escapeUrl(n),{data:e,done:f||o})},t.list=function(e,f){return 1===arguments.length?(f=e,e={}):e=e||{},this.http.get(this.path,{data:e,done:f||o})},t.createUserMember=function(e,f){return this.http.put(this.path+"/"+i.escapeUrl(e.id)+"/user-members/"+i.escapeUrl(e.userId),{data:e,done:f||o})},t.createGroupMember=function(e,f){return this.http.put(this.path+"/"+i.escapeUrl(e.id)+"/group-members/"+i.escapeUrl(e.groupId),{data:e,done:f||o})},t.deleteUserMember=function(e,f){return this.http.del(this.path+"/"+i.escapeUrl(e.id)+"/user-members/"+i.escapeUrl(e.userId),{data:e,done:f||o})},t.deleteGroupMember=function(e,f){return this.http.del(this.path+"/"+i.escapeUrl(e.id)+"/group-members/"+i.escapeUrl(e.groupId),{data:e,done:f||o})},t.update=function(e,f){return this.http.put(this.path+"/"+i.escapeUrl(e.id),{data:e,done:f||o})},t["delete"]=function(e,f){return this.http.del(this.path+"/"+i.escapeUrl(e.id),{data:e,done:f||o})},t.options=function(e,f){var n;return 1===arguments.length?(f=e,n=""):(n="string"==typeof e?e:e.id,void 0===n&&(n="")),this.http.options(this.path+"/"+i.escapeUrl(n),{done:f||o,headers:{Accept:"application/json"}})},f.exports=t},{"../../utils":42,"./../abstract-client-resource":1}],27:[function(e,f,n){"use strict";function o(){}var d=e("q"),i=e("./../abstract-client-resource"),t=e("../../utils"),l=i.extend();l.path="user",l.options=function(e,f){var n;return 1===arguments.length?(f=e,n=""):(n="string"==typeof e?e:e.id,void 0===n&&(n="")),this.http.options(this.path+"/"+t.escapeUrl(n),{
done:f||o,headers:{Accept:"application/json"}})},l.create=function(e,f){e=e||{},f=f||o;var n=["id","firstName","lastName","password"];for(var i in n){var t=n[i];if(!e[t]){var l=new Error("Missing "+t+" option to create user");return f(l),d.reject(l)}}var u={profile:{id:e.id,firstName:e.firstName,lastName:e.lastName},credentials:{password:e.password}};return e.email&&(u.profile.email=e.email),this.http.post(this.path+"/create",{data:u,done:f})},l.list=function(e,f){return 1===arguments.length?(f=e,e={}):e=e||{},this.http.get(this.path,{data:e,done:f||o})},l.count=function(e,f){return 1===arguments.length?(f=e,e={}):e=e||{},this.http.get(this.path+"/count",{data:e,done:f||o})},l.profile=function(e,f){var n="string"==typeof e?e:e.id;return this.http.get(this.path+"/"+t.escapeUrl(n)+"/profile",{done:f||o})},l.updateProfile=function(e,f){if(e=e||{},f=f||o,!e.id){var n=new Error("Missing id option to update user profile");return f(n),d.reject(n)}return this.http.put(this.path+"/"+t.escapeUrl(e.id)+"/profile",{data:e,done:f})},l.updateCredentials=function(e,f){e=e||{},f=f||o;var n;if(!e.id)return n=new Error("Missing id option to update user credentials"),f(n),d.reject(n);if(!e.password)return n=new Error("Missing password option to update user credentials"),f(n),d.reject(n);var i={password:e.password};return e.authenticatedUserPassword&&(i.authenticatedUserPassword=e.authenticatedUserPassword),this.http.put(this.path+"/"+t.escapeUrl(e.id)+"/credentials",{data:i,done:f})},l["delete"]=function(e,f){var n="string"==typeof e?e:e.id;return this.http.del(this.path+"/"+t.escapeUrl(n),{done:f||o})},f.exports=l},{"../../utils":42,"./../abstract-client-resource":1,q:49}],28:[function(e,f,n){"use strict";var o=e("./../abstract-client-resource"),d=o.extend();d.path="variable-instance",d.instances=function(e,f){return this.http.post(this.path,{data:e,done:f})},f.exports=d},{"./../abstract-client-resource":1}],29:[function(e,f,n){"use strict";function o(){}function d(){this.initialize()}var i=e("./events");d.extend=function(e,f){e=e||{},f=f||{};var n,o,d,i,t=this;n=e&&Object.hasOwnProperty.call(t,"constructor")?e.constructor:function(){return t.apply(this,arguments)};for(d in t)n[d]=t[d];for(d in f)n[d]=f[d];o=function(){this.constructor=n},o.prototype=t.prototype,n.prototype=new o;for(i in e)n.prototype[i]=e[i];return n},d.prototype.initialize=o,i.attach(d),f.exports=d},{"./events":30}],30:[function(e,f,n){"use strict";function o(e){var f,n=[];for(f in e)n.push(e[f]);return n}function d(e){var f,n=!1;return function(){return n?f:(n=!0,f=e.apply(this,arguments),e=null,f)}}function i(e,f){e._events=e._events||{},e._events[f]=e._events[f]||[]}var t={};t.attach=function(e){e.on=this.on,e.once=this.once,e.off=this.off,e.trigger=this.trigger,e._events={}},t.on=function(e,f){return i(this,e),this._events[e].push(f),this},t.once=function(e,f){var n=this,o=d(function(){n.off(e,d),f.apply(this,arguments)});return o._callback=f,this.on(e,o)},t.off=function(e,f){if(i(this,e),!f)return delete this._events[e],this;var n,o=[];for(n in this._events[e])this._events[e][n]!==f&&o.push(this._events[e][n]);return this._events[e]=o,this},t.trigger=function(){var e=o(arguments),f=e.shift();i(this,f);var n;for(n in this._events[f])this._events[f][n](this,e);return this},f.exports=t},{}],31:[function(_dereq_,module,exports){"use strict";function CamundaForm(e){if(!e)throw new Error("CamundaForm need to be initialized with options.");var f=e.done=e.done||function(e){if(e)throw e};return e.client?this.client=e.client:this.client=new CamSDK.Client(e.clientConfig||{}),e.taskId||e.processDefinitionId||e.processDefinitionKey?(this.taskId=e.taskId,this.taskId&&(this.taskBasePath=this.client.baseUrl+"/task/"+this.taskId),this.processDefinitionId=e.processDefinitionId,this.processDefinitionKey=e.processDefinitionKey,this.formElement=e.formElement,this.containerElement=e.containerElement,this.formUrl=e.formUrl,this.formElement||this.containerElement?this.formElement||this.formUrl?(this.variableManager=new VariableManager({client:this.client}),this.formFieldHandlers=e.formFieldHandlers||[InputFieldHandler,ChoicesFieldHandler,FileDownloadHandler],this.businessKey=null,this.fields=[],this.scripts=[],this.options=e,Events.attach(this),void this.initialize(f)):f(new Error("Camunda form needs to be intialized with either 'formElement' or 'formUrl'")):f(new Error("CamundaForm needs to be initilized with either 'formElement' or 'containerElement'"))):f(new Error("Cannot initialize Taskform: either 'taskId' or 'processDefinitionId' or 'processDefinitionKey' must be provided"))}var $=_dereq_("./dom-lib"),VariableManager=_dereq_("./variable-manager"),InputFieldHandler=_dereq_("./controls/input-field-handler"),ChoicesFieldHandler=_dereq_("./controls/choices-field-handler"),FileDownloadHandler=_dereq_("./controls/file-download-handler"),BaseClass=_dereq_("./../base-class"),constants=_dereq_("./constants"),Events=_dereq_("./../events");CamundaForm.prototype.initializeHandler=function(e){var f=this,n=e.selector;$(n,f.formElement).each(function(){f.fields.push(new e(this,f.variableManager))})},CamundaForm.prototype.initialize=function(e){e=e||function(e){if(e)throw e};var f=this;if(this.formUrl)this.client.http.load(this.formUrl,{accept:"*/*",done:function(n,o){if(n)return e(n);try{f.renderForm(o),f.initializeForm(e)}catch(d){e(d)}},data:{noCache:Date.now()}});else try{this.initializeForm(e)}catch(n){e(n)}},CamundaForm.prototype.renderForm=function(e){$(this.containerElement).html("").append('<div class="injected-form-wrapper">'+e+"</div>");var f=this.formElement=$("form",this.containerElement);if(1!==f.length)throw new Error("Form must provide exaclty one element <form ..>");f.attr("name")||f.attr("name","$$camForm")},CamundaForm.prototype.initializeForm=function(e){var f=this;this.initializeFormScripts(),this.initializeFieldHandlers(),this.executeFormScripts(),this.fireEvent("form-loaded"),this.fetchVariables(function(n,o){if(n)throw n;f.mergeVariables(o),f.storeOriginalValues(o),f.fireEvent("variables-fetched"),f.restore(),f.fireEvent("variables-restored"),f.applyVariables(),f.fireEvent("variables-applied"),e(null,f)})},CamundaForm.prototype.initializeFieldHandlers=function(){for(var e in this.formFieldHandlers)this.initializeHandler(this.formFieldHandlers[e])},CamundaForm.prototype.initializeFormScripts=function(){for(var e=$("script["+constants.DIRECTIVE_CAM_SCRIPT+"]",this.formElement),f=0;f<e.length;f++)this.scripts.push(e[f].text)},CamundaForm.prototype.executeFormScripts=function(){for(var e=0;e<this.scripts.length;e++)this.executeFormScript(this.scripts[e])},CamundaForm.prototype.executeFormScript=function(script){!function(camForm){eval(script)}(this)},CamundaForm.prototype.store=function(e){var f=this.taskId||this.processDefinitionId||this.caseInstanceId;if(!f){if("function"==typeof e)return e(new Error("Cannot determine the storage ID"));throw new Error("Cannot determine the storage ID")}if(this.storePrevented=!1,this.fireEvent("store"),!this.storePrevented){try{this.retrieveVariables();var n={date:Date.now(),vars:{}};for(var o in this.variableManager.variables)"Bytes"!==this.variableManager.variables[o].type&&(n.vars[o]=this.variableManager.variables[o].value);localStorage.setItem("camForm:"+f,JSON.stringify(n))}catch(d){if("function"==typeof e)return e(d);throw d}this.fireEvent("variables-stored"),"function"==typeof e&&e()}},CamundaForm.prototype.isRestorable=function(){var e=this.taskId||this.processDefinitionId||this.caseInstanceId;if(!e)throw new Error("Cannot determine the storage ID");if(!localStorage.getItem("camForm:"+e))return!1;var f=localStorage.getItem("camForm:"+e);try{f=JSON.parse(f)}catch(n){return!1}return f&&Object.keys(f).length?!0:!1},CamundaForm.prototype.restore=function(e){var f,n=this.variableManager.variables,o=this.taskId||this.processDefinitionId||this.caseDefinitionId;if(!o){if("function"==typeof e)return e(new Error("Cannot determine the storage ID"));throw new Error("Cannot determine the storage ID")}if(this.isRestorable()){try{f=localStorage.getItem("camForm:"+o),f=JSON.parse(f).vars}catch(d){if("function"==typeof e)return e(d);throw d}for(var i in f)n[i]?n[i].value=f[i]:n[i]={name:i,value:f[i]};"function"==typeof e&&e()}else if("function"==typeof e)return e()},CamundaForm.prototype.submit=function(e){var f=this.taskId||this.processDefinitionId;if(this.submitPrevented=!1,this.fireEvent("submit"),this.submitPrevented){var n=new Error("camForm submission prevented");return this.fireEvent("submit-failed",n),e&&e(n)}try{this.retrieveVariables()}catch(o){return e&&e(o)}var d=this;this.transformFiles(function(){d.submitVariables(function(n,o){return n?(d.fireEvent("submit-failed",n),e&&e(n)):(localStorage.removeItem("camForm:"+f),d.fireEvent("submit-success"),e&&e(null,o))})})},CamundaForm.prototype.transformFiles=function(e){var f=this,n=1,o=function(){0===--n&&e()},d=function(e){if(0===e)return"0 Byte";var f=1e3,n=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(e)/Math.log(f));return(e/Math.pow(f,o)).toPrecision(3)+" "+n[o]};for(var i in this.fields){var t=this.fields[i].element[0];if("file"===t.getAttribute("type"))if("function"==typeof FileReader&&t.files.length>0){if(t.files[0].size>(parseInt(t.getAttribute("cam-max-filesize"),10)||5e6))throw new Error("Maximum file size of "+d(parseInt(t.getAttribute("cam-max-filesize"),10)||5e6)+" exceeded.");var l=new FileReader;l.onloadend=function(e,n){return function(d){for(var i="",t=new Uint8Array(d.target.result),l=t.byteLength,u=0;l>u;u++)i+=String.fromCharCode(t[u]);var p=f.variableManager.variables[f.fields[e].variableName];p.value=btoa(i),"file"===p.type.toLowerCase()&&(p.valueInfo={filename:n.files[0].name,mimeType:n.files[0].type}),o()}}(i,t),l.readAsArrayBuffer(t.files[0]),n++}else f.variableManager.variables[f.fields[i].variableName].value=null}o()},CamundaForm.prototype.fetchVariables=function(e){e=e||function(){};var f=this.variableManager.variableNames();if(f.length){var n={names:f,deserializeValues:!1};this.taskId?(n.id=this.taskId,this.client.resource("task").formVariables(n,e)):(n.id=this.processDefinitionId,n.key=this.processDefinitionKey,this.client.resource("process-definition").formVariables(n,e))}else e()},CamundaForm.prototype.submitVariables=function(e){e=e||function(){};var f=this.variableManager,n=f.variables,o={};for(var d in n)if(f.isDirty(d)){var i=n[d].value;f.isJsonVariable(d)&&(i=JSON.stringify(i)),o[d]={value:i,type:n[d].type,valueInfo:n[d].valueInfo}}var t={variables:o};if(this.taskId)t.id=this.taskId,this.client.resource("task").submitForm(t,e);else{var l=this.businessKey||this.formElement.find('input[type="text"][cam-business-key]').val();l&&(t.businessKey=l),t.id=this.processDefinitionId,t.key=this.processDefinitionKey,this.client.resource("process-definition").submitForm(t,e)}},CamundaForm.prototype.storeOriginalValues=function(e){for(var f in e)this.variableManager.setOriginalValue(f,e[f].value)},CamundaForm.prototype.mergeVariables=function(e){var f=this.variableManager.variables;for(var n in e){if(f[n])for(var o in e[n])f[n][o]=f[n][o]||e[n][o];else f[n]=e[n];this.variableManager.isJsonVariable(n)&&(f[n].value=JSON.parse(e[n].value));var d=f[n].type;!this.taskBasePath||"Bytes"!==d&&"File"!==d||(f[n].contentUrl=this.taskBasePath+"/variables/"+f[n].name+"/data"),this.variableManager.isVariablesFetched=!0}},CamundaForm.prototype.applyVariables=function(){for(var e in this.fields)this.fields[e].applyValue()},CamundaForm.prototype.retrieveVariables=function(){for(var e in this.fields)this.fields[e].getValue()},CamundaForm.prototype.fireEvent=function(e,f){this.trigger(e,f)},CamundaForm.$=$,CamundaForm.VariableManager=VariableManager,CamundaForm.fields={},CamundaForm.fields.InputFieldHandler=InputFieldHandler,CamundaForm.fields.ChoicesFieldHandler=ChoicesFieldHandler,CamundaForm.cleanLocalStorage=function(e){for(var f=0;f<localStorage.length;f++){var n=localStorage.key(f);if(0===n.indexOf("camForm:")){var o=JSON.parse(localStorage.getItem(n));o.date<e&&(localStorage.removeItem(n),f--)}}},CamundaForm.extend=BaseClass.extend,module.exports=CamundaForm},{"./../base-class":29,"./../events":30,"./constants":32,"./controls/choices-field-handler":34,"./controls/file-download-handler":35,"./controls/input-field-handler":36,"./dom-lib":37,"./variable-manager":40}],32:[function(e,f,n){"use strict";f.exports={DIRECTIVE_CAM_FORM:"cam-form",DIRECTIVE_CAM_VARIABLE_NAME:"cam-variable-name",DIRECTIVE_CAM_VARIABLE_TYPE:"cam-variable-type",DIRECTIVE_CAM_FILE_DOWNLOAD:"cam-file-download",DIRECTIVE_CAM_CHOICES:"cam-choices",DIRECTIVE_CAM_SCRIPT:"cam-script"}},{}],33:[function(e,f,n){"use strict";function o(){}function d(e,f){this.element=t(e),this.variableManager=f,this.variableName=null,this.initialize()}var i=e("../../base-class"),t=e("./../dom-lib");d.selector=null,d.extend=i.extend,d.prototype.initialize=o,d.prototype.applyValue=o,d.prototype.getValue=o,f.exports=d},{"../../base-class":29,"./../dom-lib":37}],34:[function(e,f,n){"use strict";var o=e("./../constants"),d=e("./abstract-form-field"),i=e("./../dom-lib"),t=d.extend({initialize:function(){var e=this.variableName=this.element.attr(o.DIRECTIVE_CAM_VARIABLE_NAME),f=this.variableType=this.element.attr(o.DIRECTIVE_CAM_VARIABLE_TYPE),n=this.choicesVariableName=this.element.attr(o.DIRECTIVE_CAM_CHOICES);this.variableManager.createVariable({name:e,type:f,value:this.element.val()||null}),n&&this.variableManager.fetchVariable(n),this.originalValue=this.element.val()||null,this.previousValue=this.originalValue,this.variableName=e},applyValue:function(){var e=this.element[0].selectedIndex;if(this.choicesVariableName){var f=this.variableManager.variableValue(this.choicesVariableName);if(f)if(f instanceof Array)for(var n=0;n<f.length;n++){var o=f[n];this.element.find('option[text="'+o+'"]').length||this.element.append(i("<option>",{value:o,text:o}))}else for(var d in f)this.element.find('option[value="'+d+'"]').length||this.element.append(i("<option>",{value:d,text:f[d]}))}this.element[0].selectedIndex=e,this.previousValue=this.element.val()||"";var t=this.variableManager.variableValue(this.variableName);return t!==this.previousValue&&(this.element.val(t),this.element.trigger("camFormVariableApplied",t)),this},getValue:function(){var e,f=this.element.prop("multiple");return f?(e=[],this.element.find("option:selected").each(function(){e.push(i(this).val())})):e=this.element.find("option:selected").attr("value"),this.variableManager.variableValue(this.variableName,e),e}},{selector:"select["+o.DIRECTIVE_CAM_VARIABLE_NAME+"]"});f.exports=t},{"./../constants":32,"./../dom-lib":37,"./abstract-form-field":33}],35:[function(e,f,n){"use strict";var o=e("./../constants"),d=e("./abstract-form-field"),i=d.extend({initialize:function(){this.variableName=this.element.attr(o.DIRECTIVE_CAM_FILE_DOWNLOAD),this.variableManager.fetchVariable(this.variableName)},applyValue:function(){var e=this.variableManager.variable(this.variableName);return this.element.attr("href",e.contentUrl),0===this.element.text().trim().length&&this.element.text(e.valueInfo.filename),this}},{selector:"a["+o.DIRECTIVE_CAM_FILE_DOWNLOAD+"]"});f.exports=i},{"./../constants":32,"./abstract-form-field":33}],36:[function(e,f,n){"use strict";var o=e("./../constants"),d=e("./abstract-form-field"),i=function(e){return"checkbox"===e.attr("type")&&"Boolean"===e.attr(o.DIRECTIVE_CAM_VARIABLE_TYPE)},t=d.extend({initialize:function(){var e=this.element.attr(o.DIRECTIVE_CAM_VARIABLE_NAME),f=this.element.attr(o.DIRECTIVE_CAM_VARIABLE_TYPE);this.variableManager.createVariable({name:e,type:f}),this.originalValue=this.element.val(),this.previousValue=this.originalValue,this.variableName=e,this.getValue()},applyValue:function(){this.previousValue=this.getValueFromHtmlControl()||"";var e=this.variableManager.variableValue(this.variableName);return e!==this.previousValue&&(this.applyValueToHtmlControl(e),this.element.trigger("camFormVariableApplied",e)),this},getValue:function(){var e=this.getValueFromHtmlControl();return this.variableManager.variableValue(this.variableName,e),e},getValueFromHtmlControl:function(){return i(this.element)?this.element.prop("checked"):this.element.val()},applyValueToHtmlControl:function(e){i(this.element)?this.element.prop("checked",e):"file"!==this.element[0].type&&this.element.val(e)}},{selector:"input["+o.DIRECTIVE_CAM_VARIABLE_NAME+"],textarea["+o.DIRECTIVE_CAM_VARIABLE_NAME+"]"});f.exports=t},{"./../constants":32,"./abstract-form-field":33}],37:[function(e,f,n){(function(e){"use strict";!function(f){f("undefined"!=typeof window?window:e)}(function(e){e=e||{},f.exports=e.jQuery||(e.angular?e.angular.element:!1)||e.Zepto})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],38:[function(e,f,n){f.exports=e("./camunda-form")},{"./camunda-form":31}],39:[function(e,f,n){"use strict";var o=/^-?[\d]+$/,d=/^(0|(-?(((0|[1-9]\d*)\.\d+)|([1-9]\d*))))([eE][-+]?[0-9]+)?$/,i=/^(true|false)$/,t=/^(\d{2}|\d{4})(?:\-)([0]{1}\d{1}|[1]{1}[0-2]{1})(?:\-)([0-2]{1}\d{1}|[3]{1}[0-1]{1})T(?:\s)?([0-1]{1}\d{1}|[2]{1}[0-3]{1}):([0-5]{1}\d{1}):([0-5]{1}\d{1})?$/,l=function(e,f){switch(f){case"Integer":case"Long":case"Short":return o.test(e);case"Float":case"Double":return d.test(e);case"Boolean":return i.test(e);case"Date":return t.test(s(e))}},u=function(e,f){if("string"==typeof e&&(e=e.trim()),"String"===f||"Bytes"===f||"File"===f)return e;if(!l(e,f))throw new Error("Value '"+e+"' is not of type "+f);switch(f){case"Integer":case"Long":case"Short":return parseInt(e,10);case"Float":case"Double":return parseFloat(e);case"Boolean":return"true"===e;case"Date":return s(e)}},p=function(e){return 10>e?"0"+e:e},s=function(e){if("object"==typeof e&&"function"==typeof e.getFullYear){var f=e.getFullYear(),n=p(e.getMonth()+1),o=p(e.getDate()),d=p(e.getHours()),i=p(e.getMinutes()),t=p(e.getSeconds());return f+"-"+n+"-"+o+"T"+d+":"+i+":"+t}return e};f.exports={convertToType:u,isType:l,dateToString:s}},{}],40:[function(e,f,n){"use strict";function o(){this.variables={},this.isVariablesFetched=!1}var d=e("./type-util").convertToType;o.prototype.fetchVariable=function(e){if(this.isVariablesFetched)throw new Error("Illegal State: cannot call fetchVariable(), variables already fetched.");this.createVariable({name:e})},o.prototype.createVariable=function(e){if(this.variables[e.name])throw new Error("Cannot add variable with name "+e.name+": already exists.");this.variables[e.name]=e},o.prototype.destroyVariable=function(e){if(!this.variables[e])throw new Error("Cannot remove variable with name "+e+": variable does not exist.");delete this.variables[e]},o.prototype.setOriginalValue=function(e,f){if(!this.variables[e])throw new Error("Cannot set original value of variable with name "+e+": variable does not exist.");this.variables[e].originalValue=f},o.prototype.variable=function(e){return this.variables[e]},o.prototype.variableValue=function(e,f){var n=this.variable(e);return"undefined"==typeof f||null===f?f=null:""===f&&"String"!==n.type?f=null:"string"==typeof f&&"String"!==n.type&&(f=d(f,n.type)),2===arguments.length&&(n.value=f),n.value},o.prototype.isDirty=function(e){var f=this.variable(e);return this.isJsonVariable(e)?f.originalValue!==JSON.stringify(f.value):f.originalValue!==f.value||"Object"===f.type},o.prototype.isJsonVariable=function(e){var f=this.variable(e),n=f.type,o=["Object","json","Json"],d=o.indexOf(n);return 0===d?-1!==f.valueInfo.serializationDataFormat.indexOf("application/json"):-1!==d},o.prototype.variableNames=function(){return Object.keys(this.variables)},f.exports=o},{"./type-util":39}],41:[function(e,f,n){f.exports={Client:e("./api-client"),Form:e("./forms"),utils:e("./utils")}},{"./api-client":3,"./forms":38,"./utils":42}],42:[function(e,f,n){"use strict";function o(e,f,n){if(n=n||function(){},!e.length)return n();var o=0,d=function(){f(e[o],function(f){f?(n(f),n=function(){}):(o+=1,o>=e.length?n():d())})};d()}var d=f.exports={typeUtils:e("./forms/type-util")};d.solveHALEmbedded=function(e){function f(f){if("Id"!==f.slice(-2))return!1;var n=f.slice(0,-2),o=e._embedded;return!(!o[n]||!o[n].length)}function n(e){var n=Object.keys(e);for(var o in n)"_"!==n[o][0]&&f(n[o])||n.splice(o,1);return n}var o=Object.keys(e._embedded||{});for(var d in o){var i=o[d];for(var t in e._embedded[i]){e._embedded[i][t]._embedded=e._embedded[i][t]._embedded||{};var l=n(e._embedded[i][t]);for(var u in l){var p=l[u];if(e._embedded[i][t][p]){var s=e._embedded[p.slice(0,-2)];for(var y in s)s[y].id===e._embedded[i][t][p]&&(e._embedded[i][t]._embedded[p.slice(0,-2)]=[s[y]])}}}}return e},d.series=function(e,f){f=f||function(){};var n={};o(Object.keys(e),function(f,o){e[f](function(e){var d=Array.prototype.slice.call(arguments,1);d.length<=1&&(d=d[0]),n[f]=d,o(e)})},function(e){f(e,n)})},d.escapeUrl=function(e){return encodeURI(e).replace(/\//g,"%2F").replace(/%2F/g,"%252F").replace(/\*/g,"%2A").replace(/%5C/g,"%255C")}},{"./forms/type-util":39}],43:[function(e,f,n){var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function f(e){var f=e.charCodeAt(0);return f===t?62:f===l?63:u>f?-1:u+10>f?f-u+26+26:s+26>f?f-s:p+26>f?f-p+26:void 0}function n(e){function n(e){p[y++]=e}var o,d,t,l,u,p;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=e.length;u="="===e.charAt(s-2)?2:"="===e.charAt(s-1)?1:0,p=new i(3*e.length/4-u),t=u>0?e.length-4:e.length;var y=0;for(o=0,d=0;t>o;o+=4,d+=3)l=f(e.charAt(o))<<18|f(e.charAt(o+1))<<12|f(e.charAt(o+2))<<6|f(e.charAt(o+3)),n((16711680&l)>>16),n((65280&l)>>8),n(255&l);return 2===u?(l=f(e.charAt(o))<<2|f(e.charAt(o+1))>>4,n(255&l)):1===u&&(l=f(e.charAt(o))<<10|f(e.charAt(o+1))<<4|f(e.charAt(o+2))>>2,n(l>>8&255),n(255&l)),p}function d(e){function f(e){return o.charAt(e)}function n(e){return f(e>>18&63)+f(e>>12&63)+f(e>>6&63)+f(63&e)}var d,i,t,l=e.length%3,u="";for(d=0,t=e.length-l;t>d;d+=3)i=(e[d]<<16)+(e[d+1]<<8)+e[d+2],u+=n(i);switch(l){case 1:i=e[e.length-1],u+=f(i>>2),u+=f(i<<4&63),u+="==";break;case 2:i=(e[e.length-2]<<8)+e[e.length-1],u+=f(i>>10),u+=f(i>>4&63),u+=f(i<<2&63),u+="="}return u}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,t="+".charCodeAt(0),l="/".charCodeAt(0),u="0".charCodeAt(0),p="a".charCodeAt(0),s="A".charCodeAt(0);e.toByteArray=n,e.fromByteArray=d}("undefined"==typeof n?this.base64js={}:n)},{}],44:[function(e,f,n){function o(e,f,n){if(!(this instanceof o))return new o(e,f,n);var d,i=typeof e;if("number"===i)d=e>0?e>>>0:0;else if("string"===i)"base64"===f&&(e=D(e)),d=o.byteLength(e,f);else{if("object"!==i||null===e)throw new TypeError("must start with number, buffer, array or string");"Buffer"===e.type&&H(e.data)&&(e=e.data),d=+e.length>0?Math.floor(+e.length):0}if(this.length>I)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+I.toString(16)+" bytes");var t;o.TYPED_ARRAY_SUPPORT?t=o._augment(new Uint8Array(d)):(t=this,t.length=d,t._isBuffer=!0);var l;if(o.TYPED_ARRAY_SUPPORT&&"number"==typeof e.byteLength)t._set(e);else if(S(e))if(o.isBuffer(e))for(l=0;d>l;l++)t[l]=e.readUInt8(l);else for(l=0;d>l;l++)t[l]=(e[l]%256+256)%256;else if("string"===i)t.write(e,0,f);else if("number"===i&&!o.TYPED_ARRAY_SUPPORT&&!n)for(l=0;d>l;l++)t[l]=0;return t}function d(e,f,n,o){n=Number(n)||0;var d=e.length-n;o?(o=Number(o),o>d&&(o=d)):o=d;var i=f.length;if(i%2!==0)throw new Error("Invalid hex string");o>i/2&&(o=i/2);for(var t=0;o>t;t++){var l=parseInt(f.substr(2*t,2),16);if(isNaN(l))throw new Error("Invalid hex string");e[n+t]=l}return t}function i(e,f,n,o){var d=B(k(f),e,n,o);return d}function t(e,f,n,o){var d=B(q(f),e,n,o);return d}function l(e,f,n,o){return t(e,f,n,o)}function u(e,f,n,o){var d=B(A(f),e,n,o);return d}function p(e,f,n,o){var d=B(z(f),e,n,o,2);return d}function s(e,f,n){return 0===f&&n===e.length?F.fromByteArray(e):F.fromByteArray(e.slice(f,n))}function y(e,f,n){var o="",d="";n=Math.min(e.length,n);for(var i=f;n>i;i++)e[i]<=127?(o+=E(d)+String.fromCharCode(e[i]),d=""):d+="%"+e[i].toString(16);return o+E(d)}function a(e,f,n){var o="";n=Math.min(e.length,n);for(var d=f;n>d;d++)o+=String.fromCharCode(e[d]);return o}function c(e,f,n){return a(e,f,n)}function m(e,f,n){var o=e.length;(!f||0>f)&&(f=0),(!n||0>n||n>o)&&(n=o);for(var d="",i=f;n>i;i++)d+=h(e[i]);return d}function r(e,f,n){for(var o=e.slice(f,n),d="",i=0;i<o.length;i+=2)d+=String.fromCharCode(o[i]+256*o[i+1]);return d}function w(e,f,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+f>n)throw new RangeError("Trying to access beyond buffer length")}function b(e,f,n,d,i,t){if(!o.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(f>i||t>f)throw new TypeError("value is out of bounds");if(n+d>e.length)throw new TypeError("index out of range")}function g(e,f,n,o){0>f&&(f=65535+f+1);for(var d=0,i=Math.min(e.length-n,2);i>d;d++)e[n+d]=(f&255<<8*(o?d:1-d))>>>8*(o?d:1-d)}function x(e,f,n,o){0>f&&(f=4294967295+f+1);for(var d=0,i=Math.min(e.length-n,4);i>d;d++)e[n+d]=f>>>8*(o?d:3-d)&255}function j(e,f,n,o,d,i){if(f>d||i>f)throw new TypeError("value is out of bounds");if(n+o>e.length)throw new TypeError("index out of range")}function v(e,f,n,o,d){return d||j(e,f,n,4,3.4028234663852886e38,-3.4028234663852886e38),G.write(e,f,n,o,23,4),n+4}function C(e,f,n,o,d){return d||j(e,f,n,8,1.7976931348623157e308,-1.7976931348623157e308),G.write(e,f,n,o,52,8),n+8}function D(e){for(e=K(e).replace(L,"");e.length%4!==0;)e+="=";return e}function K(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function S(e){return H(e)||o.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function h(e){return 16>e?"0"+e.toString(16):e.toString(16)}function k(e){for(var f=[],n=0;n<e.length;n++){var o=e.charCodeAt(n);if(127>=o)f.push(o);else{var d=n;o>=55296&&57343>=o&&n++;for(var i=encodeURIComponent(e.slice(d,n+1)).substr(1).split("%"),t=0;t<i.length;t++)f.push(parseInt(i[t],16))}}return f}function q(e){for(var f=[],n=0;n<e.length;n++)f.push(255&e.charCodeAt(n));return f}function z(e){for(var f,n,o,d=[],i=0;i<e.length;i++)f=e.charCodeAt(i),n=f>>8,o=f%256,d.push(o),d.push(n);return d}function A(e){return F.toByteArray(e)}function B(e,f,n,o,d){d&&(o-=o%d);for(var i=0;o>i&&!(i+n>=f.length||i>=e.length);i++)f[i+n]=e[i];return i}function E(e){try{return decodeURIComponent(e)}catch(f){return String.fromCharCode(65533)}}var F=e("base64-js"),G=e("ieee754"),H=e("is-array");n.Buffer=o,n.SlowBuffer=o,n.INSPECT_MAX_BYTES=50,o.poolSize=8192;var I=1073741823;o.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),f=new Uint8Array(e);return f.foo=function(){return 42},42===f.foo()&&"function"==typeof f.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(n){return!1}}(),o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,f){if(!o.isBuffer(e)||!o.isBuffer(f))throw new TypeError("Arguments must be Buffers");for(var n=e.length,d=f.length,i=0,t=Math.min(n,d);t>i&&e[i]===f[i];i++);return i!==t&&(n=e[i],d=f[i]),d>n?-1:n>d?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,f){if(!H(e))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===e.length)return new o(0);if(1===e.length)return e[0];var n;if(void 0===f)for(f=0,n=0;n<e.length;n++)f+=e[n].length;var d=new o(f),i=0;for(n=0;n<e.length;n++){var t=e[n];t.copy(d,i),i+=t.length}return d},o.byteLength=function(e,f){var n;switch(e+="",f||"utf8"){case"ascii":case"binary":case"raw":n=e.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*e.length;break;case"hex":n=e.length>>>1;break;case"utf8":case"utf-8":n=k(e).length;break;case"base64":n=A(e).length;break;default:n=e.length}return n},o.prototype.length=void 0,o.prototype.parent=void 0,o.prototype.toString=function(e,f,n){var o=!1;if(f>>>=0,n=void 0===n||n===1/0?this.length:n>>>0,e||(e="utf8"),0>f&&(f=0),n>this.length&&(n=this.length),f>=n)return"";for(;;)switch(e){case"hex":return m(this,f,n);case"utf8":case"utf-8":return y(this,f,n);case"ascii":return a(this,f,n);case"binary":return c(this,f,n);case"base64":return s(this,f,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r(this,f,n);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return 0===o.compare(this,e)},o.prototype.inspect=function(){var e="",f=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,f).match(/.{2}/g).join(" "),this.length>f&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return o.compare(this,e)},o.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},o.prototype.set=function(e,f){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,f)},o.prototype.write=function(e,f,n,o){if(isFinite(f))isFinite(n)||(o=n,n=void 0);else{var s=o;o=f,f=n,n=s}f=Number(f)||0;var y=this.length-f;n?(n=Number(n),n>y&&(n=y)):n=y,o=String(o||"utf8").toLowerCase();var a;switch(o){case"hex":a=d(this,e,f,n);break;case"utf8":case"utf-8":a=i(this,e,f,n);break;case"ascii":a=t(this,e,f,n);break;case"binary":a=l(this,e,f,n);break;case"base64":a=u(this,e,f,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":a=p(this,e,f,n);break;default:throw new TypeError("Unknown encoding: "+o)}return a},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,f){var n=this.length;if(e=~~e,f=void 0===f?n:~~f,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>f?(f+=n,0>f&&(f=0)):f>n&&(f=n),e>f&&(f=e),o.TYPED_ARRAY_SUPPORT)return o._augment(this.subarray(e,f));for(var d=f-e,i=new o(d,void 0,!0),t=0;d>t;t++)i[t]=this[t+e];return i},o.prototype.readUInt8=function(e,f){return f||w(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,f){return f||w(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,f){return f||w(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,f){return f||w(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,f){return f||w(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readInt8=function(e,f){return f||w(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,f){f||w(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,f){f||w(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,f){return f||w(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,f){return f||w(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,f){return f||w(e,4,this.length),G.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,f){return f||w(e,4,this.length),G.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,f){return f||w(e,8,this.length),G.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,f){return f||w(e,8,this.length),G.read(this,e,!1,52,8)},o.prototype.writeUInt8=function(e,f,n){return e=+e,f>>>=0,n||b(this,e,f,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[f]=e,f+1},o.prototype.writeUInt16LE=function(e,f,n){return e=+e,f>>>=0,n||b(this,e,f,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[f]=e,this[f+1]=e>>>8):g(this,e,f,!0),f+2},o.prototype.writeUInt16BE=function(e,f,n){return e=+e,f>>>=0,n||b(this,e,f,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[f]=e>>>8,this[f+1]=e):g(this,e,f,!1),f+2},o.prototype.writeUInt32LE=function(e,f,n){
return e=+e,f>>>=0,n||b(this,e,f,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[f+3]=e>>>24,this[f+2]=e>>>16,this[f+1]=e>>>8,this[f]=e):x(this,e,f,!0),f+4},o.prototype.writeUInt32BE=function(e,f,n){return e=+e,f>>>=0,n||b(this,e,f,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[f]=e>>>24,this[f+1]=e>>>16,this[f+2]=e>>>8,this[f+3]=e):x(this,e,f,!1),f+4},o.prototype.writeInt8=function(e,f,n){return e=+e,f>>>=0,n||b(this,e,f,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[f]=e,f+1},o.prototype.writeInt16LE=function(e,f,n){return e=+e,f>>>=0,n||b(this,e,f,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[f]=e,this[f+1]=e>>>8):g(this,e,f,!0),f+2},o.prototype.writeInt16BE=function(e,f,n){return e=+e,f>>>=0,n||b(this,e,f,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[f]=e>>>8,this[f+1]=e):g(this,e,f,!1),f+2},o.prototype.writeInt32LE=function(e,f,n){return e=+e,f>>>=0,n||b(this,e,f,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[f]=e,this[f+1]=e>>>8,this[f+2]=e>>>16,this[f+3]=e>>>24):x(this,e,f,!0),f+4},o.prototype.writeInt32BE=function(e,f,n){return e=+e,f>>>=0,n||b(this,e,f,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[f]=e>>>24,this[f+1]=e>>>16,this[f+2]=e>>>8,this[f+3]=e):x(this,e,f,!1),f+4},o.prototype.writeFloatLE=function(e,f,n){return v(this,e,f,!0,n)},o.prototype.writeFloatBE=function(e,f,n){return v(this,e,f,!1,n)},o.prototype.writeDoubleLE=function(e,f,n){return C(this,e,f,!0,n)},o.prototype.writeDoubleBE=function(e,f,n){return C(this,e,f,!1,n)},o.prototype.copy=function(e,f,n,d){var i=this;if(n||(n=0),d||0===d||(d=this.length),f||(f=0),d!==n&&0!==e.length&&0!==i.length){if(n>d)throw new TypeError("sourceEnd < sourceStart");if(0>f||f>=e.length)throw new TypeError("targetStart out of bounds");if(0>n||n>=i.length)throw new TypeError("sourceStart out of bounds");if(0>d||d>i.length)throw new TypeError("sourceEnd out of bounds");d>this.length&&(d=this.length),e.length-f<d-n&&(d=e.length-f+n);var t=d-n;if(1e3>t||!o.TYPED_ARRAY_SUPPORT)for(var l=0;t>l;l++)e[l+f]=this[l+n];else e._set(this.subarray(n,n+t),f)}},o.prototype.fill=function(e,f,n){if(e||(e=0),f||(f=0),n||(n=this.length),f>n)throw new TypeError("end < start");if(n!==f&&0!==this.length){if(0>f||f>=this.length)throw new TypeError("start out of bounds");if(0>n||n>this.length)throw new TypeError("end out of bounds");var o;if("number"==typeof e)for(o=f;n>o;o++)this[o]=e;else{var d=k(e.toString()),i=d.length;for(o=f;n>o;o++)this[o]=d[o%i]}return this}},o.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(o.TYPED_ARRAY_SUPPORT)return new o(this).buffer;for(var e=new Uint8Array(this.length),f=0,n=e.length;n>f;f+=1)e[f]=this[f];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var J=o.prototype;o._augment=function(e){return e.constructor=o,e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=J.get,e.set=J.set,e.write=J.write,e.toString=J.toString,e.toLocaleString=J.toString,e.toJSON=J.toJSON,e.equals=J.equals,e.compare=J.compare,e.copy=J.copy,e.slice=J.slice,e.readUInt8=J.readUInt8,e.readUInt16LE=J.readUInt16LE,e.readUInt16BE=J.readUInt16BE,e.readUInt32LE=J.readUInt32LE,e.readUInt32BE=J.readUInt32BE,e.readInt8=J.readInt8,e.readInt16LE=J.readInt16LE,e.readInt16BE=J.readInt16BE,e.readInt32LE=J.readInt32LE,e.readInt32BE=J.readInt32BE,e.readFloatLE=J.readFloatLE,e.readFloatBE=J.readFloatBE,e.readDoubleLE=J.readDoubleLE,e.readDoubleBE=J.readDoubleBE,e.writeUInt8=J.writeUInt8,e.writeUInt16LE=J.writeUInt16LE,e.writeUInt16BE=J.writeUInt16BE,e.writeUInt32LE=J.writeUInt32LE,e.writeUInt32BE=J.writeUInt32BE,e.writeInt8=J.writeInt8,e.writeInt16LE=J.writeInt16LE,e.writeInt16BE=J.writeInt16BE,e.writeInt32LE=J.writeInt32LE,e.writeInt32BE=J.writeInt32BE,e.writeFloatLE=J.writeFloatLE,e.writeFloatBE=J.writeFloatBE,e.writeDoubleLE=J.writeDoubleLE,e.writeDoubleBE=J.writeDoubleBE,e.fill=J.fill,e.inspect=J.inspect,e.toArrayBuffer=J.toArrayBuffer,e};var L=/[^+\/0-9A-z]/g},{"base64-js":43,ieee754:46,"is-array":47}],45:[function(e,f,n){function o(e){return e?d(e):void 0}function d(e){for(var f in o.prototype)e[f]=o.prototype[f];return e}f.exports=o,o.prototype.on=o.prototype.addEventListener=function(e,f){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(f),this},o.prototype.once=function(e,f){function n(){o.off(e,n),f.apply(this,arguments)}var o=this;return this._callbacks=this._callbacks||{},n.fn=f,this.on(e,n),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(e,f){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var o,d=0;d<n.length;d++)if(o=n[d],o===f||o.fn===f){n.splice(d,1);break}return this},o.prototype.emit=function(e){this._callbacks=this._callbacks||{};var f=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var o=0,d=n.length;d>o;++o)n[o].apply(this,f)}return this},o.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},o.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],46:[function(e,f,n){n.read=function(e,f,n,o,d){var i,t,l=8*d-o-1,u=(1<<l)-1,p=u>>1,s=-7,y=n?d-1:0,a=n?-1:1,c=e[f+y];for(y+=a,i=c&(1<<-s)-1,c>>=-s,s+=l;s>0;i=256*i+e[f+y],y+=a,s-=8);for(t=i&(1<<-s)-1,i>>=-s,s+=o;s>0;t=256*t+e[f+y],y+=a,s-=8);if(0===i)i=1-p;else{if(i===u)return t?NaN:(c?-1:1)*(1/0);t+=Math.pow(2,o),i-=p}return(c?-1:1)*t*Math.pow(2,i-o)},n.write=function(e,f,n,o,d,i){var t,l,u,p=8*i-d-1,s=(1<<p)-1,y=s>>1,a=23===d?Math.pow(2,-24)-Math.pow(2,-77):0,c=o?0:i-1,m=o?1:-1,r=0>f||0===f&&0>1/f?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(l=isNaN(f)?1:0,t=s):(t=Math.floor(Math.log(f)/Math.LN2),f*(u=Math.pow(2,-t))<1&&(t--,u*=2),f+=t+y>=1?a/u:a*Math.pow(2,1-y),f*u>=2&&(t++,u/=2),t+y>=s?(l=0,t=s):t+y>=1?(l=(f*u-1)*Math.pow(2,d),t+=y):(l=f*Math.pow(2,y-1)*Math.pow(2,d),t=0));d>=8;e[n+c]=255&l,c+=m,l/=256,d-=8);for(t=t<<d|l,p+=d;p>0;e[n+c]=255&t,c+=m,t/=256,p-=8);e[n+c-m]|=128*r}},{}],47:[function(e,f,n){var o=Array.isArray,d=Object.prototype.toString;f.exports=o||function(e){return!!e&&"[object Array]"==d.call(e)}},{}],48:[function(e,f,n){function o(){}var d=f.exports={};d.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,f="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(f){var n=[];return window.addEventListener("message",function(e){var f=e.source;if((f===window||null===f)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var o=n.shift();o()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.on=o,d.addListener=o,d.once=o,d.off=o,d.removeListener=o,d.removeAllListeners=o,d.emit=o,d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],49:[function(e,f,n){(function(e){!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof n&&"object"==typeof f)f.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var o="undefined"!=typeof window?window:self,d=o.Q;o.Q=e(),o.Q.noConflict=function(){return o.Q=d,this}}}(function(){"use strict";function f(e){return function(){return X.apply(e,arguments)}}function n(e){return e===Object(e)}function o(e){return"[object StopIteration]"===de(e)||e instanceof T}function d(e,f){if(P&&f.stack&&"object"==typeof e&&null!==e&&e.stack){for(var n=[],o=f;o;o=o.source)o.stack&&(!e.__minimumStackCounter__||e.__minimumStackCounter__>o.stackCounter)&&(fe(e,"__minimumStackCounter__",{value:o.stackCounter,configurable:!0}),n.unshift(o.stack));n.unshift(e.stack);var d=n.join("\n"+ie+"\n"),t=i(d);fe(e,"stack",{value:t,configurable:!0})}}function i(e){for(var f=e.split("\n"),n=[],o=0;o<f.length;++o){var d=f[o];u(d)||t(d)||!d||n.push(d)}return n.join("\n")}function t(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function l(e){var f=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(f)return[f[1],Number(f[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var o=/.*@(.+):(\d+)$/.exec(e);return o?[o[1],Number(o[2])]:void 0}function u(e){var f=l(e);if(!f)return!1;var n=f[0],o=f[1];return n===R&&o>=U&&ye>=o}function p(){if(P)try{throw new Error}catch(e){var f=e.stack.split("\n"),n=f[0].indexOf("@")>0?f[1]:f[2],o=l(n);if(!o)return;return R=o[0],o[1]}}function s(e,f,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(f+" is deprecated, use "+n+" instead.",new Error("").stack),e.apply(e,arguments)}}function y(e){return e instanceof r?e:x(e)?q(e):k(e)}function a(){function e(e){f=e,y.longStackSupport&&P&&(i.source=e),Z(n,function(f,n){y.nextTick(function(){e.promiseDispatch.apply(e,n)})},void 0),n=void 0,o=void 0}var f,n=[],o=[],d=ee(a.prototype),i=ee(r.prototype);if(i.promiseDispatch=function(e,d,i){var t=Y(arguments);n?(n.push(t),"when"===d&&i[1]&&o.push(i[1])):y.nextTick(function(){f.promiseDispatch.apply(f,t)})},i.valueOf=function(){if(n)return i;var e=b(f);return g(e)&&(f=e),e},i.inspect=function(){return f?f.inspect():{state:"pending"}},y.longStackSupport&&P)try{throw new Error}catch(t){i.stack=t.stack.substring(t.stack.indexOf("\n")+1),i.stackCounter=te++}return d.promise=i,d.resolve=function(n){f||e(y(n))},d.fulfill=function(n){f||e(k(n))},d.reject=function(n){f||e(h(n))},d.notify=function(e){f||Z(o,function(f,n){y.nextTick(function(){n(e)})},void 0)},d}function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var f=a();try{e(f.resolve,f.reject,f.notify)}catch(n){f.reject(n)}return f.promise}function m(e){return c(function(f,n){for(var o=0,d=e.length;d>o;o++)y(e[o]).then(f,n)})}function r(e,f,n){void 0===f&&(f=function(e){return h(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var o=ee(r.prototype);if(o.promiseDispatch=function(n,d,i){var t;try{t=e[d]?e[d].apply(o,i):f.call(o,d,i)}catch(l){t=h(l)}n&&n(t)},o.inspect=n,n){var d=n();"rejected"===d.state&&(o.exception=d.reason),o.valueOf=function(){var e=n();return"pending"===e.state||"rejected"===e.state?o:e.value}}return o}function w(e,f,n,o){return y(e).then(f,n,o)}function b(e){if(g(e)){var f=e.inspect();if("fulfilled"===f.state)return f.value}return e}function g(e){return e instanceof r}function x(e){return n(e)&&"function"==typeof e.then}function j(e){return g(e)&&"pending"===e.inspect().state}function v(e){return!g(e)||"fulfilled"===e.inspect().state}function C(e){return g(e)&&"rejected"===e.inspect().state}function D(){le.length=0,ue.length=0,se||(se=!0)}function K(f,n){se&&("object"==typeof e&&"function"==typeof e.emit&&y.nextTick.runAfter(function(){-1!==$(ue,f)&&(e.emit("unhandledRejection",n,f),pe.push(f))}),ue.push(f),n&&"undefined"!=typeof n.stack?le.push(n.stack):le.push("(no stack) "+n))}function S(f){if(se){var n=$(ue,f);-1!==n&&("object"==typeof e&&"function"==typeof e.emit&&y.nextTick.runAfter(function(){var o=$(pe,f);-1!==o&&(e.emit("rejectionHandled",le[n],f),pe.splice(o,1))}),ue.splice(n,1),le.splice(n,1))}}function h(e){var f=r({when:function(f){return f&&S(this),f?f(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return K(f,e),f}function k(e){return r({when:function(){return e},get:function(f){return e[f]},set:function(f,n){e[f]=n},"delete":function(f){delete e[f]},post:function(f,n){return null===f||void 0===f?e.apply(void 0,n):e[f].apply(e,n)},apply:function(f,n){return e.apply(f,n)},keys:function(){return oe(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function q(e){var f=a();return y.nextTick(function(){try{e.then(f.resolve,f.reject,f.notify)}catch(n){f.reject(n)}}),f.promise}function z(e){return r({isDef:function(){}},function(f,n){return H(e,f,n)},function(){return y(e).inspect()})}function A(e,f,n){return y(e).spread(f,n)}function B(e){return function(){function f(e,f){var t;if("undefined"==typeof StopIteration){try{t=n[e](f)}catch(l){return h(l)}return t.done?y(t.value):w(t.value,d,i)}try{t=n[e](f)}catch(l){return o(l)?y(l.value):h(l)}return w(t,d,i)}var n=e.apply(this,arguments),d=f.bind(f,"next"),i=f.bind(f,"throw");return d()}}function E(e){y.done(y.async(e)())}function F(e){throw new T(e)}function G(e){return function(){return A([this,I(arguments)],function(f,n){return e.apply(f,n)})}}function H(e,f,n){return y(e).dispatch(f,n)}function I(e){return w(e,function(e){var f=0,n=a();return Z(e,function(o,d,i){var t;g(d)&&"fulfilled"===(t=d.inspect()).state?e[i]=t.value:(++f,w(d,function(o){e[i]=o,0===--f&&n.resolve(e)},n.reject,function(e){n.notify({index:i,value:e})}))},void 0),0===f&&n.resolve(e),n.promise})}function J(e){if(0===e.length)return y.resolve();var f=y.defer(),n=0;return Z(e,function(o,d,i){function t(e){f.resolve(e)}function l(e){if(n--,0===n){var o=e||new Error(""+e);o.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+o.message,f.reject(o)}}function u(e){f.notify({index:i,value:e})}var p=e[i];n++,w(p,t,l,u)},void 0),f.promise}function L(e){return w(e,function(e){return e=_(e,y),w(I(_(e,function(e){return w(e,V,V)})),function(){return e})})}function M(e){return y(e).allSettled()}function N(e,f){return y(e).then(void 0,void 0,f)}function O(e,f){return y(e).nodeify(f)}var P=!1;try{throw new Error}catch(Q){P=!!Q.stack}var R,T,U=p(),V=function(){},W=function(){function f(){for(var e,f;o.next;)o=o.next,e=o.task,o.task=void 0,f=o.domain,f&&(o.domain=void 0,f.enter()),n(e,f);for(;u.length;)e=u.pop(),n(e);i=!1}function n(e,n){try{e()}catch(o){if(l)throw n&&n.exit(),setTimeout(f,0),n&&n.enter(),o;setTimeout(function(){throw o},0)}n&&n.exit()}var o={task:void 0,next:null},d=o,i=!1,t=void 0,l=!1,u=[];if(W=function(f){d=d.next={task:f,domain:l&&e.domain,next:null},i||(i=!0,t())},"object"==typeof e&&"[object process]"===e.toString()&&e.nextTick)l=!0,t=function(){e.nextTick(f)};else if("function"==typeof setImmediate)t="undefined"!=typeof window?setImmediate.bind(window,f):function(){setImmediate(f)};else if("undefined"!=typeof MessageChannel){var p=new MessageChannel;p.port1.onmessage=function(){t=s,p.port1.onmessage=f,f()};var s=function(){p.port2.postMessage(0)};t=function(){setTimeout(f,0),s()}}else t=function(){setTimeout(f,0)};return W.runAfter=function(e){u.push(e),i||(i=!0,t())},W}(),X=Function.call,Y=f(Array.prototype.slice),Z=f(Array.prototype.reduce||function(e,f){var n=0,o=this.length;if(1===arguments.length)for(;;){if(n in this){f=this[n++];break}if(++n>=o)throw new TypeError}for(;o>n;n++)n in this&&(f=e(f,this[n],n));return f}),$=f(Array.prototype.indexOf||function(e){for(var f=0;f<this.length;f++)if(this[f]===e)return f;return-1}),_=f(Array.prototype.map||function(e,f){var n=this,o=[];return Z(n,function(d,i,t){o.push(e.call(f,i,t,n))},void 0),o}),ee=Object.create||function(e){function f(){}return f.prototype=e,new f},fe=Object.defineProperty||function(e,f,n){return e[f]=n.value,e},ne=f(Object.prototype.hasOwnProperty),oe=Object.keys||function(e){var f=[];for(var n in e)ne(e,n)&&f.push(n);return f},de=f(Object.prototype.toString);T="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var ie="From previous event:";y.resolve=y,y.nextTick=W,y.longStackSupport=!1;var te=1;"object"==typeof e&&e&&e.env&&e.env.Q_DEBUG&&(y.longStackSupport=!0),y.defer=a,a.prototype.makeNodeResolver=function(){var e=this;return function(f,n){f?e.reject(f):arguments.length>2?e.resolve(Y(arguments,1)):e.resolve(n)}},y.Promise=c,y.promise=c,c.race=m,c.all=I,c.reject=h,c.resolve=y,y.passByCopy=function(e){return e},r.prototype.passByCopy=function(){return this},y.join=function(e,f){return y(e).join(f)},r.prototype.join=function(e){return y([this,e]).spread(function(e,f){if(e===f)return e;throw new Error("Q can't join: not the same: "+e+" "+f)})},y.race=m,r.prototype.race=function(){return this.then(y.race)},y.makePromise=r,r.prototype.toString=function(){return"[object Promise]"},r.prototype.then=function(e,f,n){function o(f){try{return"function"==typeof e?e(f):f}catch(n){return h(n)}}function i(e){if("function"==typeof f){d(e,l);try{return f(e)}catch(n){return h(n)}}return h(e)}function t(e){return"function"==typeof n?n(e):e}var l=this,u=a(),p=!1;return y.nextTick(function(){l.promiseDispatch(function(e){p||(p=!0,u.resolve(o(e)))},"when",[function(e){p||(p=!0,u.resolve(i(e)))}])}),l.promiseDispatch(void 0,"when",[void 0,function(e){var f,n=!1;try{f=t(e)}catch(o){if(n=!0,!y.onerror)throw o;y.onerror(o)}n||u.notify(f)}]),u.promise},y.tap=function(e,f){return y(e).tap(f)},r.prototype.tap=function(e){return e=y(e),this.then(function(f){return e.fcall(f).thenResolve(f)})},y.when=w,r.prototype.thenResolve=function(e){return this.then(function(){return e})},y.thenResolve=function(e,f){return y(e).thenResolve(f)},r.prototype.thenReject=function(e){return this.then(function(){throw e})},y.thenReject=function(e,f){return y(e).thenReject(f)},y.nearer=b,y.isPromise=g,y.isPromiseAlike=x,y.isPending=j,r.prototype.isPending=function(){return"pending"===this.inspect().state},y.isFulfilled=v,r.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},y.isRejected=C,r.prototype.isRejected=function(){return"rejected"===this.inspect().state};var le=[],ue=[],pe=[],se=!0;y.resetUnhandledRejections=D,y.getUnhandledReasons=function(){return le.slice()},y.stopUnhandledRejectionTracking=function(){D(),se=!1},D(),y.reject=h,y.fulfill=k,y.master=z,y.spread=A,r.prototype.spread=function(e,f){return this.all().then(function(f){return e.apply(void 0,f)},f)},y.async=B,y.spawn=E,y["return"]=F,y.promised=G,y.dispatch=H,r.prototype.dispatch=function(e,f){var n=this,o=a();return y.nextTick(function(){n.promiseDispatch(o.resolve,e,f)}),o.promise},y.get=function(e,f){return y(e).dispatch("get",[f])},r.prototype.get=function(e){return this.dispatch("get",[e])},y.set=function(e,f,n){return y(e).dispatch("set",[f,n])},r.prototype.set=function(e,f){return this.dispatch("set",[e,f])},y.del=y["delete"]=function(e,f){return y(e).dispatch("delete",[f])},r.prototype.del=r.prototype["delete"]=function(e){return this.dispatch("delete",[e])},y.mapply=y.post=function(e,f,n){return y(e).dispatch("post",[f,n])},r.prototype.mapply=r.prototype.post=function(e,f){return this.dispatch("post",[e,f])},y.send=y.mcall=y.invoke=function(e,f){return y(e).dispatch("post",[f,Y(arguments,2)])},r.prototype.send=r.prototype.mcall=r.prototype.invoke=function(e){return this.dispatch("post",[e,Y(arguments,1)])},y.fapply=function(e,f){return y(e).dispatch("apply",[void 0,f])},r.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},y["try"]=y.fcall=function(e){return y(e).dispatch("apply",[void 0,Y(arguments,1)])},r.prototype.fcall=function(){return this.dispatch("apply",[void 0,Y(arguments)])},y.fbind=function(e){var f=y(e),n=Y(arguments,1);return function(){return f.dispatch("apply",[this,n.concat(Y(arguments))])}},r.prototype.fbind=function(){var e=this,f=Y(arguments);return function(){return e.dispatch("apply",[this,f.concat(Y(arguments))])}},y.keys=function(e){return y(e).dispatch("keys",[])},r.prototype.keys=function(){return this.dispatch("keys",[])},y.all=I,r.prototype.all=function(){return I(this)},y.any=J,r.prototype.any=function(){return J(this)},y.allResolved=s(L,"allResolved","allSettled"),r.prototype.allResolved=function(){return L(this)},y.allSettled=M,r.prototype.allSettled=function(){return this.then(function(e){return I(_(e,function(e){function f(){return e.inspect()}return e=y(e),e.then(f,f)}))})},y.fail=y["catch"]=function(e,f){return y(e).then(void 0,f)},r.prototype.fail=r.prototype["catch"]=function(e){return this.then(void 0,e)},y.progress=N,r.prototype.progress=function(e){return this.then(void 0,void 0,e)},y.fin=y["finally"]=function(e,f){return y(e)["finally"](f)},r.prototype.fin=r.prototype["finally"]=function(e){if(!e||"function"!=typeof e.apply)throw new Error("Q can't apply finally callback");return e=y(e),this.then(function(f){return e.fcall().then(function(){return f})},function(f){return e.fcall().then(function(){throw f})})},y.done=function(e,f,n,o){return y(e).done(f,n,o)},r.prototype.done=function(f,n,o){var i=function(e){y.nextTick(function(){if(d(e,t),!y.onerror)throw e;y.onerror(e)})},t=f||n||o?this.then(f,n,o):this;"object"==typeof e&&e&&e.domain&&(i=e.domain.bind(i)),t.then(void 0,i)},y.timeout=function(e,f,n){return y(e).timeout(f,n)},r.prototype.timeout=function(e,f){var n=a(),o=setTimeout(function(){f&&"string"!=typeof f||(f=new Error(f||"Timed out after "+e+" ms"),f.code="ETIMEDOUT"),n.reject(f)},e);return this.then(function(e){clearTimeout(o),n.resolve(e)},function(e){clearTimeout(o),n.reject(e)},n.notify),n.promise},y.delay=function(e,f){return void 0===f&&(f=e,e=void 0),y(e).delay(f)},r.prototype.delay=function(e){return this.then(function(f){var n=a();return setTimeout(function(){n.resolve(f)},e),n.promise})},y.nfapply=function(e,f){return y(e).nfapply(f)},r.prototype.nfapply=function(e){var f=a(),n=Y(e);return n.push(f.makeNodeResolver()),this.fapply(n).fail(f.reject),f.promise},y.nfcall=function(e){var f=Y(arguments,1);return y(e).nfapply(f)},r.prototype.nfcall=function(){var e=Y(arguments),f=a();return e.push(f.makeNodeResolver()),this.fapply(e).fail(f.reject),f.promise},y.nfbind=y.denodeify=function(e){if(void 0===e)throw new Error("Q can't wrap an undefined function");var f=Y(arguments,1);return function(){var n=f.concat(Y(arguments)),o=a();return n.push(o.makeNodeResolver()),y(e).fapply(n).fail(o.reject),o.promise}},r.prototype.nfbind=r.prototype.denodeify=function(){var e=Y(arguments);return e.unshift(this),y.denodeify.apply(void 0,e)},y.nbind=function(e,f){var n=Y(arguments,2);return function(){function o(){return e.apply(f,arguments)}var d=n.concat(Y(arguments)),i=a();return d.push(i.makeNodeResolver()),y(o).fapply(d).fail(i.reject),i.promise}},r.prototype.nbind=function(){var e=Y(arguments,0);return e.unshift(this),y.nbind.apply(void 0,e)},y.nmapply=y.npost=function(e,f,n){return y(e).npost(f,n)},r.prototype.nmapply=r.prototype.npost=function(e,f){var n=Y(f||[]),o=a();return n.push(o.makeNodeResolver()),this.dispatch("post",[e,n]).fail(o.reject),o.promise},y.nsend=y.nmcall=y.ninvoke=function(e,f){var n=Y(arguments,2),o=a();return n.push(o.makeNodeResolver()),y(e).dispatch("post",[f,n]).fail(o.reject),o.promise},r.prototype.nsend=r.prototype.nmcall=r.prototype.ninvoke=function(e){var f=Y(arguments,1),n=a();return f.push(n.makeNodeResolver()),this.dispatch("post",[e,f]).fail(n.reject),n.promise},y.nodeify=O,r.prototype.nodeify=function(e){return e?void this.then(function(f){y.nextTick(function(){e(null,f)})},function(f){y.nextTick(function(){e(f)})}):this},y.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ye=p();return y})}).call(this,e("g5I+bs"))},{"g5I+bs":48}],50:[function(e,f,n){f.exports=function(e,f,n){for(var o=0,d=e.length,i=3==arguments.length?n:e[o++];d>o;)i=f.call(null,i,e[o],++o,e);return i}},{}],51:[function(e,f,n){function o(){}function d(e){var f={}.toString.call(e);switch(f){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function i(e){return e===Object(e)}function t(e){if(!i(e))return e;var f=[];for(var n in e)null!=e[n]&&f.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return f.join("&")}function l(e){for(var f,n,o={},d=e.split("&"),i=0,t=d.length;t>i;++i)n=d[i],f=n.split("="),o[decodeURIComponent(f[0])]=decodeURIComponent(f[1]);return o}function u(e){var f,n,o,d,i=e.split(/\r?\n/),t={};i.pop();for(var l=0,u=i.length;u>l;++l)n=i[l],f=n.indexOf(":"),o=n.slice(0,f).toLowerCase(),d=b(n.slice(f+1)),t[o]=d;return t}function p(e){return e.split(/ *; */).shift()}function s(e){return w(e.split(/ *; */),function(e,f){var n=f.split(/ *= */),o=n.shift(),d=n.shift();return o&&d&&(e[o]=d),e},{})}function y(e,f){f=f||{},this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=u(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function a(e,f){var n=this;r.call(this),this._query=this._query||[],this.method=e,this.url=f,this.header={},this._header={},this.on("end",function(){var e=null,f=null;try{f=new y(n)}catch(o){return e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=o,n.callback(e)}if(n.emit("response",f),e)return n.callback(e,f);if(f.status>=200&&f.status<300)return n.callback(e,f);var d=new Error(f.statusText||"Unsuccessful HTTP response");d.original=e,d.response=f,d.status=f.status,n.callback(d,f)})}function c(e,f){return"function"==typeof f?new a("GET",e).end(f):1==arguments.length?new a("GET",e):new a(e,f)}var m,r=e("emitter"),w=e("reduce");m="undefined"!=typeof window?window:"undefined"!=typeof self?self:this,c.getXHR=function(){if(!(!m.XMLHttpRequest||m.location&&"file:"==m.location.protocol&&m.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1};var b="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};c.serializeObject=t,c.parseString=l,c.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},c.serialize={"application/x-www-form-urlencoded":t,"application/json":JSON.stringify},c.parse={"application/x-www-form-urlencoded":l,"application/json":JSON.parse},y.prototype.get=function(e){return this.header[e.toLowerCase()]},y.prototype.setHeaderProperties=function(e){var f=this.header["content-type"]||"";this.type=p(f);var n=s(f);for(var o in n)this[o]=n[o]},y.prototype.parse=function(e){return this.parser=e,this},y.prototype.parseBody=function(e){var f=this.parser||c.parse[this.type];return f&&e&&(e.length||e instanceof Object)?f(e):null},y.prototype.setStatusProperties=function(e){1223===e&&(e=204);var f=e/100|0;this.status=this.statusCode=e,this.statusType=f,this.info=1==f,this.ok=2==f,this.clientError=4==f,this.serverError=5==f,this.error=4==f||5==f?this.toError():!1,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},y.prototype.toError=function(){var e=this.req,f=e.method,n=e.url,o="cannot "+f+" "+n+" ("+this.status+")",d=new Error(o);return d.status=this.status,d.method=f,d.url=n,d},c.Response=y,r(a.prototype),a.prototype.use=function(e){return e(this),this},a.prototype.timeout=function(e){return this._timeout=e,this},a.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},a.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},a.prototype.set=function(e,f){if(i(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=f,this.header[e]=f,this},a.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},a.prototype.getHeader=function(e){return this._header[e.toLowerCase()]},a.prototype.type=function(e){return this.set("Content-Type",c.types[e]||e),this},a.prototype.accept=function(e){return this.set("Accept",c.types[e]||e),this},a.prototype.auth=function(e,f){var n=btoa(e+":"+f);return this.set("Authorization","Basic "+n),this},a.prototype.query=function(e){return"string"!=typeof e&&(e=t(e)),e&&this._query.push(e),this},a.prototype.field=function(e,f){return this._formData||(this._formData=new m.FormData),this._formData.append(e,f),this},a.prototype.attach=function(e,f,n){return this._formData||(this._formData=new m.FormData),this._formData.append(e,f,n),this},a.prototype.send=function(e){var f=i(e),n=this.getHeader("Content-Type");if(f&&i(this._data))for(var o in e)this._data[o]=e[o];else"string"==typeof e?(n||this.type("form"),n=this.getHeader("Content-Type"),"application/x-www-form-urlencoded"==n?this._data=this._data?this._data+"&"+e:e:this._data=(this._data||"")+e):this._data=e;return!f||d(e)?this:(n||this.type("json"),this)},a.prototype.callback=function(e,f){var n=this._callback;this.clearTimeout(),n(e,f)},a.prototype.crossDomainError=function(){var e=new Error("Origin is not allowed by Access-Control-Allow-Origin");e.crossDomain=!0,this.callback(e)},a.prototype.timeoutError=function(){var e=this._timeout,f=new Error("timeout of "+e+"ms exceeded");f.timeout=e,this.callback(f)},a.prototype.withCredentials=function(){return this._withCredentials=!0,this},a.prototype.end=function(e){var f=this,n=this.xhr=c.getXHR(),i=this._query.join("&"),t=this._timeout,l=this._formData||this._data;this._callback=e||o,n.onreadystatechange=function(){if(4==n.readyState){var e;try{e=n.status}catch(o){e=0}if(0==e){if(f.timedout)return f.timeoutError();if(f.aborted)return;return f.crossDomainError()}f.emit("end")}};var u=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),f.emit("progress",e)};this.hasListeners("progress")&&(n.onprogress=u);try{n.upload&&this.hasListeners("progress")&&(n.upload.onprogress=u)}catch(p){}if(t&&!this._timer&&(this._timer=setTimeout(function(){f.timedout=!0,f.abort()},t)),i&&(i=c.serializeObject(i),this.url+=~this.url.indexOf("?")?"&"+i:"?"+i),n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof l&&!d(l)){var s=this.getHeader("Content-Type"),y=c.serialize[s?s.split(";")[0]:""];y&&(l=y(l))}for(var a in this.header)null!=this.header[a]&&n.setRequestHeader(a,this.header[a]);return this.emit("request",this),n.send(l),this},a.prototype.then=function(e,f){return this.end(function(n,o){n?f(n):e(o)})},c.Request=a,c.get=function(e,f,n){var o=c("GET",e);return"function"==typeof f&&(n=f,f=null),f&&o.query(f),n&&o.end(n),o},c.head=function(e,f,n){var o=c("HEAD",e);return"function"==typeof f&&(n=f,f=null),f&&o.send(f),n&&o.end(n),o},c.del=function(e,f){var n=c("DELETE",e);return f&&n.end(f),n},c.patch=function(e,f,n){var o=c("PATCH",e);return"function"==typeof f&&(n=f,f=null),f&&o.send(f),n&&o.end(n),o},c.post=function(e,f,n){var o=c("POST",e);return"function"==typeof f&&(n=f,f=null),f&&o.send(f),n&&o.end(n),o},c.put=function(e,f,n){var o=c("PUT",e);return"function"==typeof f&&(n=f,f=null),f&&o.send(f),n&&o.end(n),o},f.exports=c},{emitter:45,reduce:50}]},{},[41])(41)});